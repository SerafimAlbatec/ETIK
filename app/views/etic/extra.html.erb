<div id="loading"></div>
  <div class="container box_shadow">



    <div class="row row_mat">

    <div class="col-xs-4" style="clear:both;">
      <!--
      <button class="menu" onclick="toggle()" onmouseenter="toggle2()">
        <span class="glyphicon glyphicon-home"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    -->

      <ul class="ul">
        <li class="li1_1"><a href="/etic/home/"  class="li1_1">1. <%= t 'mpara.open_category' %></a></li>
        <li class="li2_2"><a href="/etic/material?open_categorie=<%= @open_categorie.name %>"  class="li2_2">2. <%= t 'mpara.material' %></a></li>
        <li class="li3_3"><a href="/etic/leaf?open_categorie_name=<%= @open_categorie.name %>&material_id=<%= @material.id %>&constructor_id=<%= @constructor.id %>&system_id=<%= @system.id %>&line_id=<%= @line.id %>"  class="li3_3">3. <%= t 'mpara.leaf' %></a></li>
        <li class="li4_4"><a href="/etic/open_type?open_categorie_name=<%= @open_categorie.name %>&material_name=<%= @material.name %>&constructor_name=<%= @constructor.name %>&system_name=<%= @system.name %>&line_name=<%= @line.name%>&leaf_name=<%= @leaf.name %>"  class="li4_4">4. <%= t 'mpara.open_type' %></a></li>
        <li class="li5_5"><a href="/etic/color?open_categorie_name=<%= @open_categorie.name %>&material_name=<%= @material.name %>&constructor_name=<%= @constructor.name %>&system_name=<%= @system.name %>&line_name=<%= @line.name%>&leaf_name=<%= @leaf.name %>&open_type_name=<%= @open_type.name %>"  class="li5_5">5. <%= t 'mpara.color' %></a></li>
        <li class="li6_6"><a href="/etic/diastaseis?open_categorie_name=<%= @open_categorie.name %>&material_name=<%= @material.name %>&constructor_name=<%= @constructor.name %>&system_name=<%= @system.name %>&line_name=<%= @line.name%>&leaf_name=<%= @leaf.name %>&open_type_name=<%= @open_type.name %>&color_name=<%= @color.name %><% if (!@color_deksia.nil?) %>&coldeksia=<%= @color_deksia.name %>&colaristera=<%= @color_aristera.name %>&colpanw=<%= @color_panw.name %>&colkatw=<%= @color_katw.name %><% end %><% if (!@color_fulou.nil?) %>&colfullo=<%= @color_fulou.name %><% end %>&mesa_eksw=<%= @mesa_eksw%>"  class="li6_6">6. <%= t 'mpara.dimension' %></a></li>
        <li class="li7">7. <%= t 'mpara.extra' %></li>
        <li>8. <%= t 'mpara.price' %></li>
      </ul>

     <!--
      <div class="gen_info"> 
        <p class="gen_p_info">Γενικες οδηγίες για την επιλογη παραθύρων!!! ασφδ ασασδφ ασδφ ασδφ ασδφ ασδφ ασδφ ασδφ ασδφ ασδφ ασδφ ασδφ ασδφ ασφ ασδφ ασδ φασδφ ασφ ασφ ασδφ ασδφ ασφ ασφδ ασδφ ασφ δασφ ασφ ασφ </p>
      </div>
    -->
<div class="scroll">
    <div class="table-responsive extra_table1" style="/*overflow-y:scroll; height:250px;*/ ">
        <table class="table table1 table-condensed">
          <tr>
            <td class="td_left"><label><%= t 'material_pinakas.cat_anoigma'  %>:</label></td>
            <td class="open_categorie"><label><%= t "kouf."<<@open_categorie.name %></label></td>
          </tr>
          <tr>
            <td class="pin1h td_left"><label><%= t 'material_pinakas.material'  %>: </label></td>
            <td class="pin1"><label class="material"><%= @material.name %></label></td>
          </tr>
          <tr>
            <td class="pin2h td_left"><label><%= t 'material_pinakas.cataskevastis'  %>: </label></td>
            <td class="pin2"><label class="constructor"><%= @constructor.name %></label></td>
          </tr>
          <tr>
            <td class="pin3h td_left"><label><%= t 'material_pinakas.systima'  %>: </label></td>
            <td class="pin3"><label class="system"><%= @system.name %></label></td>
          </tr>
          <tr>
            <td class="td_left"><label><%= t 'material_pinakas.line'  %>: </label></td>
            <td class=""><label class="line"><%= @line.name %></label></td>
          </tr>
          <tr>
            <td class="td_left"><label><%= t 'material_pinakas.leaf'  %>: </label></td>
            <td class=""><label class="leaf"><%= t "fulla."<<@leaf.name %> </label></td>
          </tr>
          <tr>
            <td class="td_left"><label><%= t 'material_pinakas.open_type'  %>: </label></td>
            <td class=""><label class="open_type"><%= @open_type.name %></label></td>
          </tr>
          <tr>
            <td class="td_left"><label><%= t 'material_pinakas.diastaseis'  %>: </label></td>
            <td class=""><label class="diastaseis"><%= @width %> X <%= @height %></label></td>
          </tr>
          <tr>
            <td class="td_left"><label><%= t 'diastaseis.color'  %>: </label></td>
            <td class=""><label class="color_main"><%= @color.name %></label></td>
          </tr>
          <!--
          <% if (!@lastixo.nil?) %>
          <tr>
            <td class="td_left"><label>Λάστιχο: </label></td>
            <td class=""><label class="lastixo_extra"><%= @lastixo %></label></td>
          </tr>
          <% end %>
          -->
          <!--KAI AYTA ME IF EXISTS-->
          <% if (!@color_deksia.nil?) %>
          <tr>
            <td class="td_left"><label><%= t 'diastaseis.color_deksia'  %>: </label></td>
            <td class=""><label class="color_deksia"><%= @color_deksia.name %></label></td>
          </tr>
          <tr>
            <td class="td_left"><label><%= t 'diastaseis.color_aristera'  %>: </label></td>
            <td class=""><label class="color_aristera"><%= @color_aristera.name %></label></td>
          </tr>
          <tr>
            <td class="td_left"><label><%= t 'diastaseis.color_panw'  %>: </label></td>
            <td class=""><label class="color_panw"><%= @color_panw.name %></label></td>
          </tr>
          <tr>
            <td class="td_left"><label><%= t 'diastaseis.color_katw'  %>: </label></td>
            <td class=""><label class="color_katw"><%= @color_katw.name %></label></td>
          </tr>
          <% end %>
          <% if (!@color_fulou.nil?) %>
          <tr>
            <td class="td_left"><label><%= t 'diastaseis.color_fullou'  %>: </label></td>
            <td class=""><label class="color_fullou"><%= @color_fulou.name %></label></td>
          </tr>
          <% end %>
          <tr>
            <td class="td_left"><label><%= t 'material_pinakas.arxiki_timi'  %>: </label></td>
            <td class=""><label class="arxiki_timi"></label></td>
          </tr>
        </table>
      </div>

      <div class="table-responsive extra_table2" style="/*overflow-y:scroll; height:250px;*/">
        <table class="table table2 table-condensed">
          <tr>
            <td class="td_left"><label><%= t 'material_pinakas.nees_diastaseis'  %>: </label></td>
            <td class=""><label class="diastaseis_extra"><%= @width %>X<%= @height %></label></td>
            <td class=""><label class=""></label></td>
            <td class=""><label class="nea_timi"></label></td>
          </tr>
          <tr class="epik_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.epik'  %>: </label></td>
            <td class=""><label class="table_epikathimeno"></label></td>
            <td class=""><label class=""></label></td>
            <td class=""><label class="timi_epikathimenou"></label></td>
          </tr>
          <tr class="ekso_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.ekso'  %>: </label></td>
            <td class=""><label class="table_eksoteriko"></label></td>
            <td class=""><label class=""></label></td>
            <td class=""><label class="timi_eksoterikou"></label></td>
          </tr>
          <tr class="odoigos_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.odoigos'  %>: </label></td>
            <td class=""><label class="table_odoigos"></label></td>
            <td class=""><label class=""></label></td>
            <td class=""><label class="timi_odoigos"></label></td>
          </tr>
          <tr class="persida_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.persida'  %>: </label></td>
            <td class=""><label class="table_persida"></label></td>
            <td class=""><label class=""></label></td>
            <td class=""><label class="timi_persida"></label></td>
          </tr>
          <tr class="tzami_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.glass'  %>: </label></td>
            <td class=""><label class="table_tzami"></label></td>
            <td class=""><label class=""></label></td>
            <td class=""><label class="timi_tzami"></label></td>
          </tr>
          <tr class="profil_deksia_1_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_deksia'  %>: </label></td>
            <td class=""><label class="table_profil_deksia_1"></label></td>
            <td class=""><label class="table_profil_deksia_1_arithmos"></label></td>
            <td class=""><label class="timi_profil_deksia_1"></label></td>
          </tr>
          <tr class="profil_deksia_2_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_deksia'  %>: </label></td>
            <td class=""><label class="table_profil_deksia_2"></label></td>
            <td class=""><label class="table_profil_deksia_2_arithmos"></label></td>
            <td class=""><label class="timi_profil_deksia_2"></label></td>
          </tr>
          <tr class="profil_deksia_3_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_deksia'  %>: </label></td>
            <td class=""><label class="table_profil_deksia_3"></label></td>
            <td class=""><label class="table_profil_deksia_3_arithmos"></label></td>
            <td class=""><label class="timi_profil_deksia_3"></label></td>
          </tr>
          <tr class="profil_aristera_1_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_aristera'  %>: </label></td>
            <td class=""><label class="table_profil_aristera_1"></label></td>
            <td class=""><label class="table_profil_aristera_1_arithmos"></label></td>
            <td class=""><label class="timi_profil_aristera_1"></label></td>
          </tr>
          <tr class="profil_aristera_2_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_aristera'  %>: </label></td>
            <td class=""><label class="table_profil_aristera_2"></label></td>
            <td class=""><label class="table_profil_aristera_2_arithmos"></label></td>
            <td class=""><label class="timi_profil_aristera_2"></label></td>
          </tr>
          <tr class="profil_aristera_3_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_aristera'  %>: </label></td>
            <td class=""><label class="table_profil_aristera_3"></label></td>
            <td class=""><label class="table_profil_aristera_3_arithmos"></label></td>
            <td class=""><label class="timi_profil_aristera_3"></label></td>
          </tr>
          <tr class="profil_panw_1_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_panw'  %>: </label></td>
            <td class=""><label class="table_profil_panw_1"></label></td>
            <td class=""><label class="table_profil_panw_1_arithmos"></label></td>
            <td class=""><label class="timi_profil_panw_1"></label></td>
          </tr>
          <tr class="profil_panw_2_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_panw'  %>: </label></td>
            <td class=""><label class="table_profil_panw_2"></label></td>
            <td class=""><label class="table_profil_panw_2_arithmos"></label></td>
            <td class=""><label class="timi_profil_panw_2"></label></td>
          </tr>
          <tr class="profil_panw_3_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_panw'  %>: </label></td>
            <td class=""><label class="table_profil_panw_3"></label></td>
            <td class=""><label class="table_profil_panw_3_arithmos"></label></td>
            <td class=""><label class="timi_profil_panw_3"></label></td>
          </tr>
          <tr class="profil_katw_1_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_katw'  %>: </label></td>
            <td class=""><label class="table_profil_katw_1"></label></td>
            <td class=""><label class="table_profil_katw_1_arithmos"></label></td>
            <td class=""><label class="timi_profil_katw_1"></label></td>
          </tr>
          <tr class="profil_katw_2_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_katw'  %>: </label></td>
            <td class=""><label class="table_profil_katw_2"></label></td>
            <td class=""><label class="table_profil_katw_2_arithmos"></label></td>
            <td class=""><label class="timi_profil_katw_2"></label></td>
          </tr>
          <tr class="profil_katw_3_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.profil_katw'  %>: </label></td>
            <td class=""><label class="table_profil_katw_3"></label></td>
            <td class=""><label class="table_profil_katw_3_arithmos"></label></td>
            <td class=""><label class="timi_profil_katw_3"></label></td>
          </tr>
          <tr class="typos_katw_1_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.typos'  %>: </label></td>
            <td class=""><label class="table_typos_katw_1"></label></td>
            <td class=""><label class="table_typos_katw_1_arithmos"></label></td>
            <td class=""><label class="timi_typos_katw_1"></label></td>
          </tr>
          <tr class="typos_katw_2_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.typos'  %>: </label></td>
            <td class=""><label class="table_typos_katw_2"></label></td>
            <td class=""><label class="table_typos_katw_2_arithmos"></label></td>
            <td class=""><label class="timi_typos_katw_2"></label></td>
          </tr>
          <tr class="typos_katw_3_show_hide" style="display:none;">
            <td class="td_left"><label><%= t 'material_pinakas.typos'  %>: </label></td>
            <td class=""><label class="table_typos_katw_3"></label></td>
            <td class=""><label class="table_typos_katw_3_arithmos"></label></td>
            <td class=""><label class="timi_typos_katw_3"></label></td>
          </tr>
          
          <tr>
            <td class="td_left"><label><%= t 'material_pinakas.teliki_timi'  %>: </label></td>
            <td></td>
            <td class=""><label class=""></label></td>
            <td class=""><label class="teliki_timi"></label></td>
          </tr>
          <!--KAI AYTA ME IF EXISTS-->
        </table>
      </div>

      <canvas id="canvas" height="280" width="350" style="margin-left:10px; margin-top:10px;">
      </canvas>
      <img src="/assets/<%= @open_type.image %>" class="open_type" id="canvas_image" style="background-color: white; display: none;" >
</div> <!--end scroll-->


    </div><!--END COL-MD-3-->


    <div class="col-xs-0 col-xs-offset-3">
      <h1>6. <%= t 'extra.title' %></h1>
      <label class="width" style="display:none"><%= @width %></label>
      <label class="height" style="display:none"><%= @height %></label>
      <label class="posotita" style="display:none"><%= @posotita %></label>

      <div class="col-xs-0"> 

        <div class="button">
          <button type="button" class='btn btn-primary order_prin' data-toggle="modal" data-target="#myModal_xwrisma"><%= t 'diastaseis.add_card' %></button>
        </div>
      </div>
  

    </div>

    <hr>

    <div class="col-xs-8" style="top:0px;"><!--style="overflow:scroll; height:400px;"-->

      <div class="col-md-0 click_lastixo"> 
        <h2><%= t 'diastaseis.lastixo' %></h2>
        <div class="extra">
          <label class="lastixo"><%= t 'diastaseis.lastixo'%></label>
          </div>

      </div> <!--End md-9-->

      <div class="col-md-0 click_tzamia"> 
        <hr>
        <h2><%= t 'extra.glass_cat' %></h2>
        <div class="extra">
          <% @cat_tzamia.each do |z| %>
          <a href="#tzamia1" style="text-decoration: none; color:black;">
           <label class="cat_tzamia" id="<%= z.id %>" style="display:block;"><%= z.name %></label>
          <% end %><!--End each-->
         </a>

          <div class="tzamia" id="tzamia1">
          </div>

        </div>
      </div> <!--End md-9-->
      
      <div class="col-xs-0"> 
      <hr>
      <h2><%= t 'extra.epik_rolo' %></h2>
      <div class="extra epik_none">
        <% @epikathimena_cat.each do |e| %>
        <label class="epikathimena" id="<%= e.id %>"><%= e.name %></label>
        <% end %><!--End each-->

        <div class="epikathimena_rola">
        </div>

        <div class="color_epikathimenou">
        </div>

      </div>
      </div>
      

      <div class="col-xs-0"> 
        <hr>
        <h2><%= t 'extra.ekso_rolo' %></h2>
        <div class="extra ekso_none">
          <% @eksoteriko_cat.each do |c| %>
          <label class="eksoterika" id="<%= c.id %>"><%= c.name %></label>
          <% end %><!--End each-->

          <div class="eksoterika_rola">
          </div>

          <div class="color_eksoterikou">
          </div>

        </div>
      </div> <!--End md-9--> 

      <div class="col-xs-0 click_odoigoi"> 
        <hr>
        <h2><%= t 'extra.odoigoi' %></h2>
        <div class="extra guide_none">
          <% @roll_guide.each do |r| %>
          <a href="#col_od" style="text-decoration: none; color:black;">
            <label class="odoigoi" id="<%= r.id %>" style="display:block;"><%= r.name %></label>
          <% end %><!--End each-->
          </a>

          <div class="color_odoigou" id="col_od">
          </div>

        </div>
      </div> <!--End md-9-->

      <div class="col-xs-0"> 
        <hr>
        <h2><%= t 'extra.persides' %></h2>
        <div class="extra">
          <% @persides.each do |p| %>
          <a href="#col_pe" style="text-decoration: none; color:black;">
            <label class="perisdes" id="<%= p.id %>"><%= p.name %></label>
          <% end %><!--End each-->
          </a>

          <div class="color_persidas" id="col_pe">
          </div>

        </div>
      </div> <!--End md-9--> 

      <div class="col-xs-0"> 
        <hr>
        <h2><%= t 'extra.typos' %></h2>
        <div class="extra">
          <% @typos.each do |t| %>
          <a href="#col_typ" style="text-decoration: none; color:black;">
          <label class="typos" id="<%= t.id %>" data-toggle="modal" data-target="#myModal_t"><%= t.name %></label>
           <span id="<%= t.height %>"></span>
          <% end %><!--End each-->
          </a>

          <div class="color_typos" id="col_typ">
          </div>

        </div>
      </div> <!--End md-9--> 

      <div class="col-xs-0"> 
        <hr>
        <h2><%= t 'extra.profil' %></h2>
        <div class="extra">
          <label class="label_profil" id="deksia" onclick="anoigma_profil_deksia()"><%= t 'extra.profil_deksia' %></label>
          <label class="label_profil" id="aristera" onclick="anoigma_profil_aristera()"><%= t 'extra.profil_aristera' %></label>
          <label class="label_profil" id="panw" onclick="anoigma_profil_panw()"><%= t 'extra.profil_panw' %></label>
          <label class="label_profil" id="katw" onclick="anoigma_profil_katw()"><%= t 'extra.profil_katw' %></label>
          <hr>


          <div class="ola_ta_profil_deksia">
          <% @profil.each do |p| %>
           <a href="#profil_merias" style="text-decoration: none; color:black;">
             <label class="peninta" id="<%= p.id %>" data-toggle="modal" data-target="#myModal"><%= p.name %></label>
          <span id="<%= p.width %>" class="<%= p.height %>"></span>
          <% end %><!--End each-->
           </a>
          </div>
          <div class="ola_ta_profil_deksia_color" id="ola_deksia_col">
          </div>
          <div class="ola_ta_profil_aristera">
          <% @profil.each do |p| %>
           <a href="#profil_merias" style="text-decoration: none; color:black;">
             <label class="penintaena" id="<%= p.id %>" data-toggle="modal" data-target="#myModal_a"><%= p.name %></label>
          <span id="<%= p.width %>" class="<%= p.height %>"></span>
          <% end %><!--End each-->
           </a>
          </div>
          <div class="ola_ta_profil_aristera_color" id="ola_aristera_col">
          </div>
          <div class="ola_ta_profil_panw">
            <% @profil.each do |p| %>
           <a href="#profil_merias" style="text-decoration: none; color:black;">
             <label class="penintaduo" id="<%= p.id %>" data-toggle="modal" data-target="#myModal_p"><%= p.name %></label>
          <span id="<%= p.width %>" class="<%= p.height %>"></span>
          <% end %><!--End each-->
           </a>
          </div>
          <div class="ola_ta_profil_panw_color" id="ola_panw_col">
          </div>
          <div class="ola_ta_profil_katw">
            <% @profil.each do |p| %>
           <a href="#profil_merias" style="text-decoration: none; color:black;">
             <label class="penintatria" id="<%= p.id %>" data-toggle="modal" data-target="#myModal_k"><%= p.name %></label>
          <span id="<%= p.width %>" class="<%= p.height %>"></span>
          <% end %><!--End each-->
           </a>
          </div>
          <div class="ola_ta_profil_katw_color" id="ola_katw_col">
          </div>
          
        </div> <!--end extra-->

        
      </div> <!--End md-9-->

      


    </div>

  </div>

    <div class="home_right_add_card">
        <div class="button">
          <button type="button" class='btn btn-primary order_prin' data-toggle="modal" data-target="#myModal_xwrisma"><%= t 'diastaseis.add_card' %></button>
        </div>
      </div>

    <div class="home_right">
        <a href="#panw" class="btn btn-primary" id="home_right"><span class="glyphicon glyphicon-chevron-up"></span></a>
      </div>


      <div class="modal fade" id="myModal" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Αριθμός προφίλ</h4>
            </div>
            <div class="modal-body">
              <p>Επιλέξτε αριθμό προφίλ</p></br>
              <form id="myForm_d">
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_d" value="0">Διαγραφή</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_d" value="1">1 προφίλ</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_d" value="2">2 προφίλ</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_d" value="3">3 προφίλ</label></br>
              </form>
            </div>
            <div class="modal-footer">
              <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
              <button type="button" class="btn btn-primary arithmos_profil_deksia">Save changes</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

      <div class="modal modal_a fade" id="myModal_a" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Αριθμός προφίλ</h4>
            </div>
            <div class="modal-body">
              <p>Επιλέξτε αριθμό προφίλ</p></br>
              <form id="myForm_a">
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_a" value="0">Διαγραφή gia 2</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_a" value="1">1 προφίλ</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_a" value="2">2 προφίλ</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_a" value="3">3 προφίλ</label></br>
              </form>
            </div>
            <div class="modal-footer">
              <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
              <button type="button" class="btn btn-primary arithmos_profil_aristera">Save changes</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

      <div class="modal modal_p fade" id="myModal_p" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Αριθμός προφίλ</h4>
            </div>
            <div class="modal-body">
              <p>Επιλέξτε αριθμό προφίλ</p></br>
              <form id="myForm_p">
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_p" value="0">Διαγραφή gia p</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_p" value="1">1 προφίλ</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_p" value="2">2 προφίλ</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_p" value="3">3 προφίλ</label></br>
              </form>
            </div>
            <div class="modal-footer">
              <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
              <button type="button" class="btn btn-primary arithmos_profil_panw">Save changes</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

      <div class="modal modal_k fade" id="myModal_k" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Αριθμός προφίλ</h4>
            </div>
            <div class="modal-body">
              <p>Επιλέξτε αριθμό προφίλ</p></br>
              <form id="myForm_k">
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_k" value="0">Διαγραφή gia k</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_k" value="1">1 προφίλ</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_k" value="2">2 προφίλ</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_k" value="3">3 προφίλ</label></br>
              </form>
            </div>
            <div class="modal-footer">
              <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
              <button type="button" class="btn btn-primary arithmos_profil_katw">Save changes</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

      <div class="modal modal_t fade" id="myModal_t" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Αριθμός τύπου</h4>
            </div>
            <div class="modal-body">
              <p>Επιλέξτε αριθμό τύπου</p></br>
              <form id="myForm_t">
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_t" value="0">Διαγραφή για τύπο</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_t" value="1">1 τύπος</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_t" value="2">2 τύπος</label></br>
                  <label class="radio-inline"><input class="radio" type="radio" name="optradio_t" value="3">3 τύπος</label></br>
              </form>
            </div>
            <div class="modal-footer">
              <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
              <button type="button" class="btn btn-primary arithmos_typos">Save changes</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

      <div class="modal modal_xwrisma fade" id="myModal_xwrisma" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Νέα χωρίσματα</h4>
            </div>
            <div class="modal-body">
              <p>Εισαγωγή χωρίσματος</p></br>
              <form id="myForm_xwrisma">
                      <h4 id="modal_new_width"></h4>
                  <% if  (!@xwrisma1.nil? && @xwrisma1 != "0") %>
                      <p>Χώρισμα αριστερά:<input type="text" name="aristera_xwrisma"></p>
                      <p>Χώρισμα δεξιά:<input type="text" name="deksia_xwrisma"></p>
                  <% end %>
                  <% if  (!@xwrisma3_1.nil? && @xwrisma3_1 != "0") %>
                      <p>Χώρισμα αριστερά:<input type="text" name="aristera_xwrisma_3"></p>
                      <p>Χώρισμα μέση:<input type="text" name="mesi_xwrisma"></p>
                      <p>Χώρισμα δεξιά:<input type="text" name="deksia_xwrisma_3"></p>
                  <% end %>
                       <h4 id="modal_new_height"></h4>
                  <% if  (!@xwrisma_y_1.nil? && @xwrisma_y_1 != "0") %>
                      <p>Χώρισμα πάνω:<input type="text" name="panw_xwrisma"></p>
                      <p>Χώρισμα κάτω:<input type="text" name="katw_xwrisma"></p>
                  <% end %>
              </form>
              <button type="button" class="btn btn-primary update">Update</button>
            </div>
            <div class="modal-footer">
              <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
              <button type="button" class="btn btn-primary order"><%= t 'diastaseis.add_card' %></button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->


    <!--</div>--><!--end row 2-->

    
  </div><!--End conteiner-->

  <script type='text/javascript'>

(function()
{
  if( window.localStorage )
  {
    if( !localStorage.getItem( 'firstLoad' ) )
    {
      localStorage[ 'firstLoad' ] = true;
      window.location.reload();
    }  
    else
      localStorage.removeItem( 'firstLoad' );
  }
})();

</script>

  <script>

$(window).load(function() {

  var code = Number("<%= @open_type.code %>");
  
  if ( code === 1 || code === 1.1 ){
        //alert("aaaaAAAAaaaaaAAAAaaaAAAAaaaAAA");
          drawCanvasMonXwrFegMikro("<%= @color.code %>",1,1);
        }
        if ( code === 2 || code === 3 || code === 4 || code === 5 || code === 19 || code === 20  ){
          drawCanvasMonXwrFeg("<%= @color.code %>",1,1);
        }
        if ( code === 6 || code === 6.1  ){
          drawCanvasDifXwrFegMikro("<%= @color.code %>",1,1);
        }
        if ( code === 7 || code === 9 || code === 10 || code === 22 || code === 24 ){
          drawCanvasDifXwrFeg("<%= @color.code %>",1,1);
        }
        if ( (code === 8 || code === 8.1) && "<%= @open_type.name %>" == "2 Tlg.Fenster Dreh-Kipp links-FOF -R" ){
          DifDeksiaMikroXwrFeg("<%= @color.code %>",1,1);
        }
        if ( (code === 8 || code === 8.1) && "<%= @open_type.name %>" == "2 Tlg.Fenster Dreh-Kipp links-FOF -L" ){
          DifAristeraMikroXwrFeg("<%= @color.code %>",1,1);
        }
        if ( code === 11 || code === 11.1 ){
          ParathiroTriDeksiaAristeraMikro2("<%= @color.code %>",1,1);
        }
        if ( code === 12 || code === 12.1 ){
          ParathiroTriDeksiaAristeraMikro("<%= @color.code %>",1,1);
        }
        if ( code === 13 || code === 25 ){
          drawCanvasTriXwrFeg("<%= @color.code %>",1,1);
        }
        if ( code === 14 || code === 14.1 ){
          PortaMonMeFegMikro("<%= @color.code %>",1,1);
        }
        if ( code === 15 ){
          PortaMonMeFegMegalo("<%= @color.code %>",1,1);
        }
        if ( code === 16 || code === 16.1 ){
          PortaDifFegMikro("<%= @color.code %>",1,1);
        }
        if ( code === 17 ){
          PortaDifFegMiaPorta("<%= @color.code %>",1,1);
        }
        if ( code === 18 ){
          PortaDifFegDuoPortes("<%= @color.code %>",1,1);
        }
        if ( code === 21 ){
          MpalkonoportaMonFegMegalo("<%= @color.code %>",1,1);
        }
        if ( (code === 23 || code === 23.1) && "<%= @open_type.name %>" == "2 Flg. Balkontür Dreh links mit festem Flügel rechts (FMF)" ){
          DifDeksiaMikroXwrFeg("<%= @color.code %>",1,1);
        }
        if ( (code === 23 || code === 23.1) && "<%= @open_type.name %>" == "2 Flg. Balkontür mit festem Flügel links (FMF) und Dreh rechts" ){
          DifAristeraMikroXwrFeg("<%= @color.code %>",1,1);
        }
        if ( (code === 26 || code === 26.1) && "<%= @open_type.name %>" == "3 Flg. Balkontür Dreh links-Dreh Kipp rechts- F -R" ){
          MpalkonoportaTriDeksiaMikro("<%= @color.code %>",1,1);
        }
        if ( (code === 26 || code === 26.1) && "<%= @open_type.name %>" == "3 Flg. Balkontür Dreh links-Dreh Kipp rechts- F -L" ){
          MpalkonoportaTriAristeraMikro("<%= @color.code %>",1,1);
        }


    arxikiEikona();
    var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
    var decimal = parseInt(b, 2);
    zwgrafia(decimal,0,0,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

    //katheti_line_sketi($(".height").text());
    //orizontia_line_sketi($(".width").text());


    times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

});


  $(document).ready(function(){

    $( ".ola_ta_profil_deksia" ).hide();
    $( ".ola_ta_profil_aristera" ).hide();
    $( ".ola_ta_profil_panw" ).hide();
    $( ".ola_ta_profil_katw" ).hide();

       //Τα φορτωνω πρωτα για να τα εχω για τις γραμμες
       ypsos_a($(".height").text());
       mikos_a($(".width").text());


       // This function runs every time the user scrolls the page.
       $(window).scroll(function(){
       
      // Check weather the user has scrolled down (if "scrollTop()"" is more than 0)
       if($(window).scrollTop() > 630){
       
      // If it's more than or equal to 0, show the toTop button.
       //console.log("is more");
       $("#home_right").fadeIn("slow");
       }
       else {
       // If it's less than 0 (at the top), hide the toTop button.
       //console.log("is less");
       $("#home_right").fadeOut("slow");
       
      }
       });
 
      // When the user clicks the toTop button, we want the page to scroll to the top.
       $("#home_right").click(function(){
       
      // Disable the default behaviour when a user clicks an empty anchor link.
       // (The page jumps to the top instead of // animating)
       event.preventDefault();
       
      // Animate the scrolling motion.
       $("body, .container").animate({
       scrollTop:0
       },"slow");
            //$('html, body').animate({scrollTop:0}, 'slow');
          });



    //Global πινακας με οικονες αναλογα την κατασταση.
    IMAGE = [];

    //Τιμες με μικοι και υψοι προσορινες για να κανω πραξεις...
    //Το height new και width new τα περναω για price
    height = $(".height").text();
    width = $(".width").text();
    height_new = Number(height);
    width_new = Number(width);
    //Μικοι, υψοι για προφιλ, τυπους και επικαθημενα...Αυτα δηλαδη που αλλαζουν το μεγεθος του κουφωματος
    width_d = 0;
    width_a = 0;
    height_p = 0;
    height_k = 0;
    height_epik = 0;
    height_typos = 0;
    
    //Τι θα περασω στην επομενη σελιδα....price
    //Τα περναω ολα + νεο υψος και μηκος και κανω στον controller υπολογισμους για τιμη.
    eksoteriko_rolo = 0;
    color_eksoterikou = 0;
    epikathimeno_rolo = 0;
    color_epikathimenou = 0;
    persida = 0;
    color_persidas = 0;
    odoigos = 0;
    color_odoigou = 0;
    tzamia = 0;
    typos = 0;
    color_typos = 0;
    profil = 0;
    profil_deksia = 0;
    profil_aristera = 0;
    profil_panw = 0;
    profil_katw = 0;
    color_profil_deksia = 0;
    color_profil_aristera = 0;
    color_profil_panw = 0;
    color_profil_katw = 0;

    //Color για προφιλ αρχικα
    color_deksia = "<%= @color.name %>"
    color_aristera = "<%= @color.name %>"
    color_katw = "<%= @color.name %>"
    color_panw = "<%= @color.name %>"

    //Για canva θεσεις σε πινακα
    geniko_rolo = "0";
    geniko_persida = "0";
    pro_p = "0";
    pro_d = "0";
    pro_a = "0";
    pro_k = "0";
    leaf = "<%= @leaf.name %>";
    //Για συναρτηση
    color_rolou = "white";
    color_pers = "white";
    color_p = "white";
    color_k = "white";
    color_d = "white";
    color_a = "white";
    //alert(leaf);


    ///////////////////// PROFIL ΔΕΞΙΑ ///////////////////////////////////
    $(".ola_ta_profil_deksia_color").hide();
    ////////alert(geniko_rolo+geniko_persida+geniko_profil);
    ////////SaveImg(geniko_rolo+geniko_persida+geniko_profil);
    color_profil_deksia = "white";
    color_d = "#F9F8F8"
    $.ajax({
      type:'GET',
      url:'/etic/color_profil',
      dataType: "json",
      //data: { material_id: $(this).attr('id') },
      success: function(data) {
        var h2 = "<label><%= t 'mpara.color' %>: </label>"
        $(h2).appendTo(".ola_ta_profil_deksia_color");
        var xrwma = "<label class='xr_profil_deksia'>"+color_profil_deksia+"</label><br>"
        $(xrwma).appendTo(".ola_ta_profil_deksia_color");
        var div = "<div class='div_col_profil_deksia'></div>"
        $(div).appendTo(".ola_ta_profil_deksia_color");
        $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
            //alert(item.name);
            //return $(".kataskevastes").html(item.name);
            //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
            var div_data = "<div class='xrwma xrwma2'><h5 class='tipos_name'> "+item.name+" </h5><img src='/assets/"+item.image+"' class=color_deksia_profil id="+item.name+"><span id="+item.code+"></span></div>";
            $(div_data).appendTo(".ola_ta_profil_deksia_color");
          })
        console.log(data) //Δινει στοιχεια για τα data
      },
      error: function(data) { 
      }
    });//end ejax
    //DisplayImg(pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo);
  

    profil_deksia_counter = 0;// Πόσα προφίλ διαφορετικα έχω...Μεχρι 3.
    sunolika_profil_deksia = 0;// Πόσα προφίλ έχω όλα μαζι...Μεχρι 3.
    profil_deksia_array =[];
    profil_deksia_1_id = "0";
    profil_deksia_1_json_arithmos = "0";
    profil_deksia_2_id = "0";
    profil_deksia_2_json_arithmos = "0";
    profil_deksia_3_id = "0";
    profil_deksia_3_json_arithmos = "0";
    

    function deksia_profil(id, arithmo, seira) {
        this.id = id;
        this.arithmo = arithmo;
        this.seira = seira;
    }

    function functiontofindIndexByKeyValue(arraytosearch, key, valuetosearch) {
 
    for (var i = 0; i < arraytosearch.length; i++) {
     
    if (arraytosearch[i][key] == valuetosearch) {
    return i;
    }
    }
    return null;
    }

    $(".extra").on("click", ".peninta", function() {
      
      profil_deksia_new = $(this).attr('id');
      $( this ).css("background-color","#CA3333");
      $( this ).css("color","white");
      epilogi = $( this );
      width_profil = Number(epilogi.next().attr('id'));
      

    });

    $(".modal").on("click", ".arithmos_profil_deksia", function() {
          //ti_epeleksa = $("input:checked").val();
          ti_epeleksa = $('input[name=optradio_d]:checked', '#myForm_d').val();
          $('.modal').modal('hide');
          //alert(typeof(ti_epeleksa));

          // Αν πατησω πανω απο 0 πρωφιλ τα προσθετω στον πινακα.
          if (ti_epeleksa !== "0"){
            //Βρησκω αν αυτο που πατησα το εχω ειδη επιλεξει. (Αν κανω αλλαγη απο 2 σε 1 πχ)
            //Το διαγραφω και μετα παλι απο την αρχη
            var result = $.grep(profil_deksia_array, function(e){ return e.id == profil_deksia_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              sunolika_profil_deksia = sunolika_profil_deksia - parseInt(result[0].arithmo);
              profil_deksia_counter = profil_deksia_counter - 1;
              width_new = width_new + (width_profil * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              var index = functiontofindIndexByKeyValue(profil_deksia_array, "id", profil_deksia_new);
              if (index > -1) {
                  console.log("Profil:"+profil_deksia_new);
                  profil_deksia_array.splice(index, 1);
                  console.log("Μετα απο αλλαγη");
                  console.log(profil_deksia_array);
                  console.log("Μετα απο αλλαγη");
                  if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;

                  profil_deksia_1_id = profil_deksia_2_id;
                  profil_deksia_1_json_arithmos = profil_deksia_2_json_arithmos;
                  profil_deksia_2_id = profil_deksia_3_id;
                  profil_deksia_2_json_arithmos = profil_deksia_3_json_arithmos;
                  profil_deksia_3_id = 0;
                  profil_deksia_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;

                  profil_deksia_2_id = profil_deksia_3_id;
                  profil_deksia_2_json_arithmos = profil_deksia_3_json_arithmos;
                  profil_deksia_3_id = 0;
                  profil_deksia_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_deksia_3_id = 0;
                  profil_deksia_3_json_arithmos = 0;
                }

              }
            } else {
              // multiple items found
            }

            width_profil = Number(epilogi.next().attr('id'));
            console.log("Width profil"+width_profil);
            $.ajax({
                type:'GET',
                url:'/etic/upologismos_platos_profil',
                dataType: "json",
                data: { profil: epilogi.attr('id'), anoigma: $(".open_type").text(), width_new: width_new, input: ti_epeleksa },
                success: function(data) {
                 if ( data ) {
      
                  width_new = width_new - (width_profil * parseInt(ti_epeleksa));
                  $(".diastaseis_extra").text(width_new +"X"+height_new);
                  width_d = (width_profil * parseInt(ti_epeleksa));

                  //////////////////////////////////////////////////////////////////////////////
                  profil_deksia_counter = profil_deksia_counter + 1;
                  sunolika_profil_deksia = sunolika_profil_deksia + parseInt(ti_epeleksa);
                  console.log("Counter: "+profil_deksia_counter);
                  console.log("Sunolika: "+sunolika_profil_deksia);
                  if (sunolika_profil_deksia <= 3 && profil_deksia_counter <= 3){
                  if(profil_deksia_counter == 1){
                      profil_deksia_1 = new deksia_profil(profil_deksia_new, ti_epeleksa, profil_deksia_counter);
                      //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                      //
                      profil_deksia_1_id = profil_deksia_new;
                      profil_deksia_1_json_arithmos = ti_epeleksa;
                      //
                      console.log(profil_deksia_1);
                      profil_deksia_array.push(profil_deksia_1);
                      console.log(profil_deksia_array);
                  }else if( profil_deksia_counter == 2){
                    profil_deksia_2 = new deksia_profil(profil_deksia_new, ti_epeleksa, profil_deksia_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_deksia_2_id = profil_deksia_new;
                    profil_deksia_2_json_arithmos = ti_epeleksa;
                    //
                    console.log(profil_deksia_2);
                    profil_deksia_array.push(profil_deksia_2);
                    console.log(profil_deksia_array);
                  }else if( profil_deksia_counter == 3){
                    profil_deksia_3 = new deksia_profil(profil_deksia_new, ti_epeleksa, profil_deksia_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_deksia_3_id = profil_deksia_new;
                    profil_deksia_3_json_arithmos = ti_epeleksa;
                    //
                    console.log(profil_deksia_3);
                    profil_deksia_array.push(profil_deksia_3);
                    console.log(profil_deksia_array);
                  }
          
                  }//end if ελεγχου <= 3
                  else{
                      profil_deksia_counter = profil_deksia_counter - 1;
                      sunolika_profil_deksia = sunolika_profil_deksia - parseInt(ti_epeleksa);
                      console.log("Counter: "+profil_deksia_counter);
                      console.log("Sunolika: "+sunolika_profil_deksia);

                      width_new = width_new + (width_profil * parseInt(ti_epeleksa));
                      $(".diastaseis_extra").text(width_new +"X"+height_new);
                      //width_d = (width_profil * parseInt(ti_epeleksa));

                      $( epilogi ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
                      $( epilogi ).css("color","");
                      apomenoun_akomi_deksia = 3 - sunolika_profil_deksia;
                      alert("Εισαγωγή μόνο τριών προφίλ. Εχετε επιλέξει ήδη "+sunolika_profil_deksia+" συνολικά προφίλ δεξια. Απομένουν ακόμη "+apomenoun_akomi_deksia+" προφίλ δεξιά!");
                  }

                  if (sunolika_profil_deksia > 0 && profil_deksia_counter > 0){
                  console.log("Μπηκα στο ιφ");
                  //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
                  $(".ola_ta_profil_deksia_color").show();

                  pro_d = "1";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

                }//end megalitera apo 0
                else{
                  color_profil_deksia = "white";
                  $(".ola_ta_profil_deksia_color").hide();
                  pro_d = "0";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
                }
                  
                          
                  }else{
                    alert("Το παράθυρο είναι μικρό");

                  }
                  },
              error: function(data) { 
              }
            });//end ejax
      
            
          }else{// Διαγράφω το αντικειμενο, -1 counter και -1 γενικο counter


            var result = $.grep(profil_deksia_array, function(e){ return e.id == profil_deksia_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              console.log(result[0].arithmo);
              sunolika_profil_deksia = sunolika_profil_deksia - parseInt(result[0].arithmo);
              width_new = width_new + (width_profil * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              //width_d = (width_profil * parseInt(ti_epeleksa));
            } else {
              // multiple items found
            }
            var index = functiontofindIndexByKeyValue(profil_deksia_array, "id", profil_deksia_new);
            console.log(index);
            if (index > -1) {
                profil_deksia_array.splice(index, 1);

                if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;

                  profil_deksia_1_id = profil_deksia_2_id;
                  profil_deksia_1_json_arithmos = profil_deksia_2_json_arithmos;
                  profil_deksia_2_id = profil_deksia_3_id;
                  profil_deksia_2_json_arithmos = profil_deksia_3_json_arithmos;
                  profil_deksia_3_id = 0;
                  profil_deksia_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;

                  profil_deksia_2_id = profil_deksia_3_id;
                  profil_deksia_2_json_arithmos = profil_deksia_3_json_arithmos;
                  profil_deksia_3_id = 0;
                  profil_deksia_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_deksia_3_id = 0;
                  profil_deksia_3_json_arithmos = 0;
                }
            }
            if ( index != null ){
              profil_deksia_counter = profil_deksia_counter - 1;
            }
            //console.log(profil_deksia_array);
            $( epilogi ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( epilogi ).css("color","");
            console.log("Counter: "+profil_deksia_counter);
            console.log("Sunolika: "+sunolika_profil_deksia);
            console.log("Μετα απο διαγραφή"+profil_deksia_array);

            if (sunolika_profil_deksia > 0 && profil_deksia_counter > 0){
            console.log("Μπηκα στο ιφ");
            //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
            $(".ola_ta_profil_deksia_color").show();

            pro_d = "1";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
            
            /*
            if (profil_deksia_array[0].id !== undefined){ profil_deksia_array[0].id, profil_deksia_array[0].arithmo }else{ 0, 0 },if (profil_deksia_array[1].id !== undefined){ profil_deksia_array[1].id, profil_deksia_array[1].arithmo }else{ 0, 0 },if (profil_deksia_array[2].id !== undefined){ profil_deksia_array[2].id, profil_deksia_array[2].arithmo }else{ 0, 0 } */


          }//end megalitera apo 0
          else{
            color_profil_deksia = "white";
            $(".ola_ta_profil_deksia_color").hide();
            pro_d = "0";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }//end ζωγραφικη
          }//end else apo 0 ti dialeksa



      });

   $(".ola_ta_profil_deksia_color").on("click", ".color_deksia_profil", function() {
      color_profil_deksia = $(this).attr('id');
      $(".xr_profil_deksia").text(color_profil_deksia);

      color = $(this).next().attr('id');
      color_d = color;
      pro_d = "1";
      var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
      var decimal = parseInt(b, 2);
      zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

    });

   ///////////////////// PROFIL ΑΡΙΣΤΕΡΑ ///////////////////////////////////
    $(".ola_ta_profil_aristera_color").hide();
    ////////alert(geniko_rolo+geniko_persida+geniko_profil);
    ////////SaveImg(geniko_rolo+geniko_persida+geniko_profil);
    color_profil_aristera = "white";
    color_a = "#F9F8F8"
    $.ajax({
      type:'GET',
      url:'/etic/color_profil',
      dataType: "json",
      //data: { material_id: $(this).attr('id') },
      success: function(data) {
        var h2 = "<label><%= t 'mpara.color' %>: </label>"
        $(h2).appendTo(".ola_ta_profil_aristera_color");
        var xrwma = "<label class='xr_profil_aristera'>"+color_profil_aristera+"</label><br>"
        $(xrwma).appendTo(".ola_ta_profil_aristera_color");
        var div = "<div class='div_col_profil_aristera'></div>"
        $(div).appendTo(".ola_ta_profil_aristera_color");
        $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
            //alert(item.name);
            //return $(".kataskevastes").html(item.name);
            //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
            var div_data = "<div class='xrwma xrwma2'><h5 class='tipos_name'> "+item.name+" </h5><img src='/assets/"+item.image+"' class=color_aristera_profil id="+item.name+"><span id="+item.code+"></span></div>";
            $(div_data).appendTo(".ola_ta_profil_aristera_color");
          })
        console.log(data) //Δινει στοιχεια για τα data
      },
      error: function(data) { 
      }
    });//end ejax
    //DisplayImg(pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo);
  

    profil_aristera_counter = 0;// Πόσα προφίλ διαφορετικα έχω...Μεχρι 3.
    sunolika_profil_aristera = 0;// Πόσα προφίλ έχω όλα μαζι...Μεχρι 3.
    profil_aristera_array =[];
    profil_aristera_1_id = "0";
    profil_aristera_1_json_arithmos = "0";
    profil_aristera_2_id = "0";
    profil_aristera_2_json_arithmos = "0";
    profil_aristera_3_id = "0";
    profil_aristera_3_json_arithmos = "0";
    

    function aristera_profil(id, arithmo, seira) {
        this.id = id;
        this.arithmo = arithmo;
        this.seira = seira;
    }

    

    $(".extra").on("click", ".penintaena", function() {
      
      profil_aristera_new = $(this).attr('id');
      $( this ).css("background-color","#CA3333");
      $( this ).css("color","white");
      epilogi_a = $( this );
      width_profil_a = Number(epilogi_a.next().attr('id'));
      

    });

    $(".modal_a").on("click", ".arithmos_profil_aristera", function() {
          //ti_epeleksa_a = $("input:checked").val();
          ti_epeleksa_a = $('input[name=optradio_a]:checked', '#myForm_a').val();
          console.log("Ti epeleksa:"+ti_epeleksa_a);
          $('.modal_a').modal('hide');
          //alert(typeof(ti_epeleksa));

          // Αν πατησω πανω απο 0 πρωφιλ τα προσθετω στον πινακα.
          if (ti_epeleksa_a !== "0"){
            //Βρησκω αν αυτο που πατησα το εχω ειδη επιλεξει. (Αν κανω αλλαγη απο 2 σε 1 πχ)
            //Το διαγραφω και μετα παλι απο την αρχη
            var result = $.grep(profil_aristera_array, function(e){ return e.id == profil_aristera_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              sunolika_profil_aristera = sunolika_profil_aristera - parseInt(result[0].arithmo);
              profil_aristera_counter = profil_aristera_counter - 1;
              width_new = width_new + (width_profil_a * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              var index = functiontofindIndexByKeyValue(profil_aristera_array, "id", profil_aristera_new);
              if (index > -1) {
                  profil_aristera_array.splice(index, 1);
                  console.log("Μετα απο αλλαγη"+profil_aristera_array);
                  if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;
                  profil_aristera_1_id = profil_aristera_2_id;
                  profil_aristera_1_json_arithmos = profil_aristera_2_json_arithmos;
                  profil_aristera_2_id = profil_aristera_3_id;
                  profil_aristera_2_json_arithmos = profil_aristera_3_json_arithmos;
                  profil_aristera_3_id = 0;
                  profil_aristera_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;
                  profil_aristera_2_id = profil_aristera_3_id;
                  profil_aristera_2_json_arithmos = profil_aristera_3_json_arithmos;
                  profil_aristera_3_id = 0;
                  profil_aristera_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_aristera_3_id = 0;
                  profil_aristera_3_json_arithmos = 0;
                }
              }
            } else {
              // multiple items found
            }

            width_profil_a = Number(epilogi_a.next().attr('id'));
            console.log("Width profil"+width_profil_a);
            $.ajax({
                type:'GET',
                url:'/etic/upologismos_platos_profil',
                dataType: "json",
                data: { profil: epilogi_a.attr('id'), anoigma: $(".open_type").text(), width_new: width_new, input: ti_epeleksa_a },
                success: function(data) {
                 if ( data ) {
      
                  width_new = width_new - (width_profil_a * parseInt(ti_epeleksa_a));
                  $(".diastaseis_extra").text(width_new +"X"+height_new);
                  width_a = (width_profil_a * parseInt(ti_epeleksa_a));

                  //////////////////////////////////////////////////////////////////////////////
                  profil_aristera_counter = profil_aristera_counter + 1;
                  sunolika_profil_aristera = sunolika_profil_aristera + parseInt(ti_epeleksa_a);
                  console.log("Counter: "+profil_aristera_counter);
                  console.log("Sunolika: "+sunolika_profil_aristera);
                  if (sunolika_profil_aristera <= 3 && profil_aristera_counter <= 3){
                  if(profil_aristera_counter == 1){
                      profil_aristera_1 = new aristera_profil(profil_aristera_new, ti_epeleksa_a, profil_aristera_counter);
                      //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                      //
                      profil_aristera_1_id = profil_aristera_new;
                      profil_aristera_1_json_arithmos = ti_epeleksa_a;
                      //
                      console.log(profil_aristera_1);
                      profil_aristera_array.push(profil_aristera_1);
                      console.log(profil_aristera_array);
                  }else if( profil_aristera_counter == 2){
                    profil_aristera_2 = new aristera_profil(profil_aristera_new, ti_epeleksa_a, profil_aristera_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_aristera_2_id = profil_aristera_new;
                    profil_aristera_2_json_arithmos = ti_epeleksa_a;
                    //
                    console.log(profil_aristera_2);
                    profil_aristera_array.push(profil_aristera_2);
                    console.log(profil_aristera_array);
                  }else if( profil_aristera_counter == 3){
                    profil_aristera_3 = new aristera_profil(profil_aristera_new, ti_epeleksa_a, profil_aristera_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_aristera_3_id = profil_aristera_new;
                    profil_aristera_3_json_arithmos = ti_epeleksa_a;
                    //
                    console.log(profil_aristera_3);
                    profil_aristera_array.push(profil_aristera_3);
                    console.log(profil_aristera_array);
                  }
          
                  }//end if ελεγχου <= 3
                  else{
                      profil_aristera_counter = profil_aristera_counter - 1;
                      sunolika_profil_aristera = sunolika_profil_aristera - parseInt(ti_epeleksa_a);
                      console.log("Counter: "+profil_aristera_counter);
                      console.log("Sunolika: "+sunolika_profil_aristera);

                      width_new = width_new + (width_profil_a * parseInt(ti_epeleksa_a));
                      $(".diastaseis_extra").text(width_new +"X"+height_new);
                      //width_d = (width_profil * parseInt(ti_epeleksa));

                      $( epilogi_a ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
                      $( epilogi_a ).css("color","");
                      apomenoun_akomi_aristera = 3 - sunolika_profil_aristera;
                      alert("Εισαγωγή μόνο τριών προφίλ. Εχετε επιλέξει ήδη "+sunolika_profil_aristera+" συνολικά προφίλ αριστερά. Απομένουν ακόμη "+apomenoun_akomi_aristera+" προφίλ αριστερά!");
                  }

                  if (sunolika_profil_aristera > 0 && profil_aristera_counter > 0){
                  console.log("Μπηκα στο ιφ");
                  //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
                  $(".ola_ta_profil_aristera_color").show();

                  pro_a = "1";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

                }//end megalitera apo 0
                else{
                  color_profil_aristera = "white";
                  $(".ola_ta_profil_aristera_color").hide();
                  pro_a = "0";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
                }
                  
                          
                  }else{
                    alert("Μικρό παράθυρο");

                  }
                  },
              error: function(data) { 
              }
            });//end ejax
      
            
          }else{// Διαγράφω το αντικειμενο, -1 counter και -1 γενικο counter


            var result = $.grep(profil_aristera_array, function(e){ return e.id == profil_aristera_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              console.log(result[0].arithmo);
              sunolika_profil_aristera = sunolika_profil_aristera - parseInt(result[0].arithmo);
              width_new = width_new + (width_profil_a * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              //width_d = (width_profil * parseInt(ti_epeleksa));
            } else {
              // multiple items found
            }
            var index = functiontofindIndexByKeyValue(profil_aristera_array, "id", profil_aristera_new);
            console.log(index);
            if (index > -1) {
                profil_aristera_array.splice(index, 1);

                if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;

                  profil_aristera_1_id = profil_aristera_2_id;
                  profil_aristera_1_json_arithmos = profil_aristera_2_json_arithmos;
                  profil_aristera_2_id = profil_aristera_3_id;
                  profil_aristera_2_json_arithmos = profil_aristera_3_json_arithmos;
                  profil_aristera_3_id = 0;
                  profil_aristera_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;

                  profil_aristera_2_id = profil_aristera_3_id;
                  profil_aristera_2_json_arithmos = profil_aristera_3_json_arithmos;
                  profil_aristera_3_id = 0;
                  profil_aristera_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_aristera_3_id = 0;
                  profil_aristera_3_json_arithmos = 0;
                }
            }
            if ( index != null ){
              profil_aristera_counter = profil_aristera_counter - 1;
            }
            //console.log(profil_deksia_array);
            $( epilogi_a ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( epilogi_a ).css("color","");
            console.log("Counter: "+profil_aristera_counter);
            console.log("Sunolika: "+sunolika_profil_aristera);
            console.log("Μετα απο διαγραφή"+profil_aristera_array);

            if (sunolika_profil_aristera > 0 && profil_aristera_counter > 0){
            console.log("Μπηκα στο ιφ");
            //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
            $(".ola_ta_profil_aristera_color").show();

            pro_a = "1";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
            
            /*
            if (profil_deksia_array[0].id !== undefined){ profil_deksia_array[0].id, profil_deksia_array[0].arithmo }else{ 0, 0 },if (profil_deksia_array[1].id !== undefined){ profil_deksia_array[1].id, profil_deksia_array[1].arithmo }else{ 0, 0 },if (profil_deksia_array[2].id !== undefined){ profil_deksia_array[2].id, profil_deksia_array[2].arithmo }else{ 0, 0 } */


          }//end megalitera apo 0
          else{
            color_profil_aristera = "white";
            $(".ola_ta_profil_aristera_color").hide();
            pro_a = "0";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }//end ζωγραφικη
          }//end else apo 0 ti dialeksa


  
      });

   $(".ola_ta_profil_aristera_color").on("click", ".color_aristera_profil", function() {
      color_profil_aristera = $(this).attr('id');
      $(".xr_profil_aristera").text(color_profil_aristera);

      color_ar = $(this).next().attr('id');
      color_a = color_ar;
      pro_a = "1";
      var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
      var decimal = parseInt(b, 2);
      zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

    });


   ///////////////////// PROFIL ΠΑΝΩ ///////////////////////////////////
    $(".ola_ta_profil_panw_color").hide();
    ////////alert(geniko_rolo+geniko_persida+geniko_profil);
    ////////SaveImg(geniko_rolo+geniko_persida+geniko_profil);
    color_profil_panw = "white";
    color_p = "#F9F8F8"
    $.ajax({
      type:'GET',
      url:'/etic/color_profil',
      dataType: "json",
      //data: { material_id: $(this).attr('id') },
      success: function(data) {
        var h2 = "<label><%= t 'mpara.color' %>: </label>"
        $(h2).appendTo(".ola_ta_profil_panw_color");
        var xrwma = "<label class='xr_profil_panw'>"+color_profil_panw+"</label><br>"
        $(xrwma).appendTo(".ola_ta_profil_panw_color");
        var div = "<div class='div_col_profil_panw'></div>"
        $(div).appendTo(".ola_ta_profil_panw_color");
        $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
            //alert(item.name);
            //return $(".kataskevastes").html(item.name);
            //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
            var div_data = "<div class='xrwma xrwma2'><h5 class='tipos_name'> "+item.name+" </h5><img src='/assets/"+item.image+"' class=color_panw_profil id="+item.name+"><span id="+item.code+"></span></div>";
            $(div_data).appendTo(".ola_ta_profil_panw_color");
          })
        console.log(data) //Δινει στοιχεια για τα data
      },
      error: function(data) { 
      }
    });//end ejax
    //DisplayImg(pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo);
  

    profil_panw_counter = 0;// Πόσα προφίλ διαφορετικα έχω...Μεχρι 3.
    sunolika_profil_panw = 0;// Πόσα προφίλ έχω όλα μαζι...Μεχρι 3.
    profil_panw_array =[];
    profil_panw_1_id = "0";
    profil_panw_1_json_arithmos = "0";
    profil_panw_2_id = "0";
    profil_panw_2_json_arithmos = "0";
    profil_panw_3_id = "0";
    profil_panw_3_json_arithmos = "0";
    

    function panw_profil(id, arithmo, seira) {
        this.id = id;
        this.arithmo = arithmo;
        this.seira = seira;
    }

    

    $(".extra").on("click", ".penintaduo", function() {
      
      profil_panw_new = $(this).attr('id');
      $( this ).css("background-color","#CA3333");
      $( this ).css("color","white");
      epilogi_p = $( this );
      height_profil_p = Number(epilogi_p.next().attr('class'));
      console.log(height_profil_p);
      

    });

    $(".modal_p").on("click", ".arithmos_profil_panw", function() {
          //ti_epeleksa_a = $("input:checked").val();
          ti_epeleksa_p = $('input[name=optradio_p]:checked', '#myForm_p').val();
          console.log("Ti epeleksa p:"+ti_epeleksa_p);
          $('.modal_p').modal('hide');
          //alert(typeof(ti_epeleksa));

          // Αν πατησω πανω απο 0 πρωφιλ τα προσθετω στον πινακα.
          if (ti_epeleksa_p !== "0"){
            //Βρησκω αν αυτο που πατησα το εχω ειδη επιλεξει. (Αν κανω αλλαγη απο 2 σε 1 πχ)
            //Το διαγραφω και μετα παλι απο την αρχη
            var result = $.grep(profil_panw_array, function(e){ return e.id == profil_panw_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              sunolika_profil_panw = sunolika_profil_panw - parseInt(result[0].arithmo);
              profil_panw_counter = profil_panw_counter - 1;
              height_new = height_new + (height_profil_p * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              var index = functiontofindIndexByKeyValue(profil_panw_array, "id", profil_panw_new);
              if (index > -1) {
                  profil_panw_array.splice(index, 1);
                  console.log("Μετα απο αλλαγη πανω"+profil_panw_array);
                  if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;
                  profil_panw_1_id = profil_panw_2_id;
                  profil_panw_1_json_arithmos = profil_panw_2_json_arithmos;
                  profil_panw_2_id = profil_panw_3_id;
                  profil_panw_2_json_arithmos = profil_panw_3_json_arithmos;
                  profil_panw_3_id = 0;
                  profil_panw_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;
                  profil_panw_2_id = profil_panw_3_id;
                  profil_panw_2_json_arithmos = profil_panw_3_json_arithmos;
                  profil_panw_3_id = 0;
                  profil_panw_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_panw_3_id = 0;
                  profil_panw_3_json_arithmos = 0;
                }
              }
            } else {
              // multiple items found
            }

            height_profil_p = Number(epilogi_p.next().attr('class'));
            console.log("Height profil"+height_profil_p);
            $.ajax({
                type:'GET',
                url:'/etic/upologismos_upsos_profil',
                dataType: "json",
                data: { profil: epilogi_p.attr('id'), anoigma: $(".open_type").text(), height_new: height_new, input: ti_epeleksa_p },
                success: function(data) {
                 if ( data ) {
      
                  height_new = height_new - (height_profil_p * parseInt(ti_epeleksa_p));
                  $(".diastaseis_extra").text(width_new +"X"+height_new);
                  height_p = (height_profil_p * parseInt(ti_epeleksa_p));

                  //////////////////////////////////////////////////////////////////////////////
                  profil_panw_counter = profil_panw_counter + 1;
                  sunolika_profil_panw = sunolika_profil_panw + parseInt(ti_epeleksa_p);
                  console.log("Counter: "+profil_panw_counter);
                  console.log("Sunolika: "+sunolika_profil_panw);
                  if (sunolika_profil_panw <= 3 && profil_panw_counter <= 3){
                  if(profil_panw_counter == 1){
                      profil_panw_1 = new panw_profil(profil_panw_new, ti_epeleksa_p, profil_panw_counter);
                      //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                      //
                      profil_panw_1_id = profil_panw_new;
                      profil_panw_1_json_arithmos = ti_epeleksa_p;
                      //
                      console.log(profil_panw_1);
                      profil_panw_array.push(profil_panw_1);
                      console.log(profil_panw_array);
                  }else if( profil_panw_counter == 2){
                    profil_panw_2 = new panw_profil(profil_panw_new, ti_epeleksa_p, profil_panw_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_panw_2_id = profil_panw_new;
                    profil_panw_2_json_arithmos = ti_epeleksa_p;
                    //
                    console.log(profil_panw_2);
                    profil_panw_array.push(profil_panw_2);
                    console.log(profil_panw_array);
                  }else if( profil_panw_counter == 3){
                    profil_panw_3 = new panw_profil(profil_panw_new, ti_epeleksa_p, profil_panw_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_panw_3_id = profil_panw_new;
                    profil_panw_3_json_arithmos = ti_epeleksa_p;
                    //
                    console.log(profil_panw_3);
                    profil_panw_array.push(profil_panw_3);
                    console.log(profil_panw_array);
                  }
          
                  }//end if ελεγχου <= 3
                  else{
                      profil_panw_counter = profil_panw_counter - 1;
                      sunolika_profil_panw = sunolika_profil_panw - parseInt(ti_epeleksa_p);
                      console.log("Counter: "+profil_panw_counter);
                      console.log("Sunolika: "+sunolika_profil_panw);

                      height_new = height_new + (height_profil_p * parseInt(ti_epeleksa_p));
                      $(".diastaseis_extra").text(width_new +"X"+height_new);
                      //width_d = (width_profil * parseInt(ti_epeleksa));

                      $( epilogi_p ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
                      $( epilogi_p ).css("color","");
                      apomenoun_akomi_panw = 3 - sunolika_profil_panw;
                      alert("Εισαγωγή μόνο τριών προφίλ. Εχετε επιλέξει ήδη "+sunolika_profil_panw+" συνολικά προφίλ επάνω. Απομένουν ακόμη "+apomenoun_akomi_panw+" προφίλ επάνω!");
                  }

                  if (sunolika_profil_panw > 0 && profil_panw_counter > 0){
                  console.log("Μπηκα στο ιφ");
                  //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
                  $(".ola_ta_profil_panw_color").show();

                  pro_p = "1";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

                }//end megalitera apo 0
                else{
                  color_profil_panw = "white";
                  $(".ola_ta_profil_panw_color").hide();
                  pro_p = "0";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
                }


                  
                          
                  }else{
                    alert("Μικρό παράθυρο!!");

                  }
                  },
              error: function(data) { 
              }
            });//end ejax
      
            
          }else{// Διαγράφω το αντικειμενο, -1 counter και -1 γενικο counter


            var result = $.grep(profil_panw_array, function(e){ return e.id == profil_panw_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              console.log(result[0].arithmo);
              sunolika_profil_panw = sunolika_profil_panw - parseInt(result[0].arithmo);
              height_new = height_new + (height_profil_p * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              //width_d = (width_profil * parseInt(ti_epeleksa));
            } else {
              // multiple items found
            }
            var index = functiontofindIndexByKeyValue(profil_panw_array, "id", profil_panw_new);
            console.log(index);
            if (index > -1) {
                profil_panw_array.splice(index, 1);

                if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;
                  profil_panw_1_id = profil_panw_2_id;
                  profil_panw_1_json_arithmos = profil_panw_2_json_arithmos;
                  profil_panw_2_id = profil_panw_3_id;
                  profil_panw_2_json_arithmos = profil_panw_3_json_arithmos;
                  profil_panw_3_id = 0;
                  profil_panw_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;
                  profil_panw_2_id = profil_panw_3_id;
                  profil_panw_2_json_arithmos = profil_panw_3_json_arithmos;
                  profil_panw_3_id = 0;
                  profil_panw_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_panw_3_id = 0;
                  profil_panw_3_json_arithmos = 0;
                }
            }
            if ( index != null ){
              profil_panw_counter = profil_panw_counter - 1;
            }
            //console.log(profil_deksia_array);
            $( epilogi_p ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( epilogi_p ).css("color","");
            console.log("Counter: "+profil_panw_counter);
            console.log("Sunolika: "+sunolika_profil_panw);
            console.log("Μετα απο διαγραφή"+profil_panw_array);

            if (sunolika_profil_panw > 0 && profil_panw_counter > 0){
            console.log("Μπηκα στο ιφ");
            //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
            $(".ola_ta_profil_panw_color").show();

            pro_p = "1";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
            
            /*
            if (profil_deksia_array[0].id !== undefined){ profil_deksia_array[0].id, profil_deksia_array[0].arithmo }else{ 0, 0 },if (profil_deksia_array[1].id !== undefined){ profil_deksia_array[1].id, profil_deksia_array[1].arithmo }else{ 0, 0 },if (profil_deksia_array[2].id !== undefined){ profil_deksia_array[2].id, profil_deksia_array[2].arithmo }else{ 0, 0 } */


          }//end megalitera apo 0
          else{
            color_profil_panw = "white";
            $(".ola_ta_profil_panw_color").hide();
            pro_p = "0";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }//end ζωγραφικη
          }//end else apo 0 ti dialeksa


  
      });

   $(".ola_ta_profil_panw_color").on("click", ".color_panw_profil", function() {
      color_profil_panw = $(this).attr('id');
      $(".xr_profil_panw").text(color_profil_panw);

      color_pa = $(this).next().attr('id');
      color_p = color_pa;
      pro_p = "1";
      var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
      var decimal = parseInt(b, 2);
      zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

    });

   ///////////////////// PROFIL ΚΑΤΩ ///////////////////////////////////
    $(".ola_ta_profil_katw_color").hide();
    ////////alert(geniko_rolo+geniko_persida+geniko_profil);
    ////////SaveImg(geniko_rolo+geniko_persida+geniko_profil);
    color_profil_katw = "white";
    color_k = "#F9F8F8"
    $.ajax({
      type:'GET',
      url:'/etic/color_profil',
      dataType: "json",
      //data: { material_id: $(this).attr('id') },
      success: function(data) {
        var h2 = "<label><%= t 'mpara.color' %>: </label>"
        $(h2).appendTo(".ola_ta_profil_katw_color");
        var xrwma = "<label class='xr_profil_katw'>"+color_profil_katw+"</label><br>"
        $(xrwma).appendTo(".ola_ta_profil_katw_color");
        var div = "<div class='div_col_profil_katw'></div>"
        $(div).appendTo(".ola_ta_profil_katw_color");
        $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
            //alert(item.name);
            //return $(".kataskevastes").html(item.name);
            //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
            var div_data = "<div class='xrwma xrwma2'><h5 class='tipos_name'> "+item.name+" </h5><img src='/assets/"+item.image+"' class=color_katw_profil id="+item.name+"><span id="+item.code+"></span></div>";
            $(div_data).appendTo(".ola_ta_profil_katw_color");
          })
        console.log(data) //Δινει στοιχεια για τα data
      },
      error: function(data) { 
      }
    });//end ejax
    //DisplayImg(pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo);
  

    profil_katw_counter = 0;// Πόσα προφίλ διαφορετικα έχω...Μεχρι 3.
    sunolika_profil_katw = 0;// Πόσα προφίλ έχω όλα μαζι...Μεχρι 3.
    profil_katw_array =[];
    profil_katw_1_id = "0";
    profil_katw_1_json_arithmos = "0";
    profil_katw_2_id = "0";
    profil_katw_2_json_arithmos = "0";
    profil_katw_3_id = "0";
    profil_katw_3_json_arithmos = "0";
    

    function katw_profil(id, arithmo, seira) {
        this.id = id;
        this.arithmo = arithmo;
        this.seira = seira;
    }

    

    $(".extra").on("click", ".penintatria", function() {
      
      profil_katw_new = $(this).attr('id');
      $( this ).css("background-color","#CA3333");
      $( this ).css("color","white");
      epilogi_k = $( this );
      height_profil_k = Number(epilogi_k.next().attr('class'));
      console.log(height_profil_k);
      

    });

    $(".modal_k").on("click", ".arithmos_profil_katw", function() {
          //ti_epeleksa_a = $("input:checked").val();
          ti_epeleksa_k = $('input[name=optradio_k]:checked', '#myForm_k').val();
          console.log("Ti epeleksa k:"+ti_epeleksa_k);
          $('.modal_k').modal('hide');
          //alert(typeof(ti_epeleksa));

          // Αν πατησω πανω απο 0 πρωφιλ τα προσθετω στον πινακα.
          if (ti_epeleksa_k !== "0"){
            //Βρησκω αν αυτο που πατησα το εχω ειδη επιλεξει. (Αν κανω αλλαγη απο 2 σε 1 πχ)
            //Το διαγραφω και μετα παλι απο την αρχη
            var result = $.grep(profil_katw_array, function(e){ return e.id == profil_katw_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              sunolika_profil_katw = sunolika_profil_katw - parseInt(result[0].arithmo);
              profil_katw_counter = profil_katw_counter - 1;
              height_new = height_new + (height_profil_k * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              var index = functiontofindIndexByKeyValue(profil_katw_array, "id", profil_katw_new);
              if (index > -1) {
                  profil_katw_array.splice(index, 1);
                  console.log("Μετα απο αλλαγη κατω"+profil_katw_array);
                  if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;
                  profil_katw_1_id = profil_katw_2_id;
                  profil_katw_1_json_arithmos = profil_katw_2_json_arithmos;
                  profil_katw_2_id = profil_katw_3_id;
                  profil_katw_2_json_arithmos = profil_katw_3_json_arithmos;
                  profil_katw_3_id = 0;
                  profil_katw_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;
                  profil_katw_2_id = profil_katw_3_id;
                  profil_katw_2_json_arithmos = profil_katw_3_json_arithmos;
                  profil_katw_3_id = 0;
                  profil_katw_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_katw_3_id = 0;
                  profil_katw_3_json_arithmos = 0;
                }
              }
            } else {
              // multiple items found
            }

            height_profil_k = Number(epilogi_k.next().attr('class'));
            console.log("Height profil"+height_profil_k);
            $.ajax({
                type:'GET',
                url:'/etic/upologismos_upsos_profil',
                dataType: "json",
                data: { profil: epilogi_k.attr('id'), anoigma: $(".open_type").text(), height_new: height_new, input: ti_epeleksa_k },
                success: function(data) {
                 if ( data ) {
      
                  height_new = height_new - (height_profil_k * parseInt(ti_epeleksa_k));
                  $(".diastaseis_extra").text(width_new +"X"+height_new);
                  height_k = (height_profil_k * parseInt(ti_epeleksa_k));

                  //////////////////////////////////////////////////////////////////////////////
                  profil_katw_counter = profil_katw_counter + 1;
                  sunolika_profil_katw = sunolika_profil_katw + parseInt(ti_epeleksa_k);
                  console.log("Counter: "+profil_katw_counter);
                  console.log("Sunolika: "+sunolika_profil_katw);
                  if (sunolika_profil_katw <= 3 && profil_katw_counter <= 3){
                  if(profil_katw_counter == 1){
                      profil_katw_1 = new katw_profil(profil_katw_new, ti_epeleksa_k, profil_katw_counter);
                      //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                      //
                      profil_katw_1_id = profil_katw_new;
                      profil_katw_1_json_arithmos = ti_epeleksa_k;
                      //
                      console.log(profil_katw_1);
                      profil_katw_array.push(profil_katw_1);
                      console.log(profil_katw_array);
                  }else if( profil_katw_counter == 2){
                    profil_katw_2 = new katw_profil(profil_katw_new, ti_epeleksa_k, profil_katw_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_katw_2_id = profil_katw_new;
                    profil_katw_2_json_arithmos = ti_epeleksa_k;
                    //
                    console.log(profil_katw_2);
                    profil_katw_array.push(profil_katw_2);
                    console.log(profil_katw_array);
                  }else if( profil_katw_counter == 3){
                    profil_katw_3 = new katw_profil(profil_katw_new, ti_epeleksa_k, profil_katw_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_katw_3_id = profil_katw_new;
                    profil_katw_3_json_arithmos = ti_epeleksa_k;
                    //
                    console.log(profil_katw_3);
                    profil_katw_array.push(profil_katw_3);
                    console.log(profil_katw_array);
                  }
          
                  }//end if ελεγχου <= 3
                  else{
                      profil_katw_counter = profil_katw_counter - 1;
                      sunolika_profil_katw = sunolika_profil_katw - parseInt(ti_epeleksa_k);
                      console.log("Counter: "+profil_katw_counter);
                      console.log("Sunolika: "+sunolika_profil_katw);

                      height_new = height_new + (height_profil_k * parseInt(ti_epeleksa_k));
                      $(".diastaseis_extra").text(width_new +"X"+height_new);
                      //width_d = (width_profil * parseInt(ti_epeleksa));

                      $( epilogi_k ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
                      $( epilogi_k ).css("color","");
                      apomenoun_akomi_katw = 3 - sunolika_profil_katw;
                      alert("Εισαγωγή μόνο τριών προφίλ. Εχετε επιλέξει ήδη "+sunolika_profil_katw+" συνολικά προφίλ κάτω. Απομένουν ακόμη "+apomenoun_akomi_katw+" προφίλ κάτω!");
                  }

                  if (sunolika_profil_katw > 0 && profil_katw_counter > 0){
                  console.log("Μπηκα στο ιφ");
                  //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
                  $(".ola_ta_profil_katw_color").show();

                  pro_k = "1";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

                }//end megalitera apo 0
                else if (sunolika_profil_katw > 0 && profil_katw_counter == 0){//Εχω προφιλ κατω απο πριν
                  color_profil_katw = "white";
                  $(".ola_ta_profil_katw_color").hide();
                  //pro_k = "0";
                  //var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  //var decimal = parseInt(b, 2);
                  //zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

                }
                else{
                  color_profil_katw = "white";
                  $(".ola_ta_profil_katw_color").hide();
                  pro_k = "0";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
                }


                  
                          
                  }else{
                    alert("Μικρό παράθυρο");

                  }
                  },
              error: function(data) { 
              }
            });//end ejax
      
            
          }else{// Διαγράφω το αντικειμενο, -1 counter και -1 γενικο counter


            var result = $.grep(profil_katw_array, function(e){ return e.id == profil_katw_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              console.log(result[0].arithmo);
              sunolika_profil_katw = sunolika_profil_katw - parseInt(result[0].arithmo);
              height_new = height_new + (height_profil_k * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              //width_d = (width_profil * parseInt(ti_epeleksa));
            } else {
              // multiple items found
            }
            var index = functiontofindIndexByKeyValue(profil_katw_array, "id", profil_katw_new);
            console.log(index);
            if (index > -1) {
                profil_katw_array.splice(index, 1);

                if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;
                  profil_katw_1_id = profil_katw_2_id;
                  profil_katw_1_json_arithmos = profil_katw_2_json_arithmos;
                  profil_katw_2_id = profil_katw_3_id;
                  profil_katw_2_json_arithmos = profil_katw_3_json_arithmos;
                  profil_katw_3_id = 0;
                  profil_katw_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;
                  profil_katw_2_id = profil_katw_3_id;
                  profil_katw_2_json_arithmos = profil_katw_3_json_arithmos;
                  profil_katw_3_id = 0;
                  profil_katw_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_katw_3_id = 0;
                  profil_katw_3_json_arithmos = 0;
                }
            }
            if ( index != null ){
              profil_katw_counter = profil_katw_counter - 1;
            }
            //console.log(profil_deksia_array);
            $( epilogi_k ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( epilogi_k ).css("color","");
            console.log("Counter: "+profil_katw_counter);
            console.log("Sunolika: "+sunolika_profil_katw);
            console.log("Μετα απο διαγραφή"+profil_katw_array);

            if (sunolika_profil_katw > 0 && profil_katw_counter > 0){
            console.log("Μπηκα στο ιφ");
            //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
            $(".ola_ta_profil_katw_color").show();

            pro_k = "1";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
            


          }//end megalitera apo 0
          else if (sunolika_profil_katw > 0 && profil_katw_counter == 0){//Εχω προφιλ κατω απο πριν
            color_profil_katw = "white";
            $(".ola_ta_profil_katw_color").hide();
            //pro_k = "0";
            //var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            //var decimal = parseInt(b, 2);
            //zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

          }
          
          else{
            color_profil_katw = "white";
            $(".ola_ta_profil_katw_color").hide();
            pro_k = "0";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }//end ζωγραφικη
          }//end else apo 0 ti dialeksa,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos


  
      });

   $(".ola_ta_profil_katw_color").on("click", ".color_katw_profil", function() {
      color_profil_katw = $(this).attr('id');
      $(".xr_profil_katw").text(color_profil_katw);
      $(".xr_typos").text(color_profil_katw);

      color_ka = $(this).next().attr('id');
      color_k = color_ka;
      pro_k = "1";
      var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
      var decimal = parseInt(b, 2);
      zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

    });

   ///////////////////// ΤΥΠΟΣ ///////////////////////////////////
    $(".color_typos").hide();
    ////////alert(geniko_rolo+geniko_persida+geniko_profil);
    ////////SaveImg(geniko_rolo+geniko_persida+geniko_profil);
    //color_typos = "white";
    //color_k = "#F9F8F8"
    $.ajax({
      type:'GET',
      url:'/etic/color_profil',
      dataType: "json",
      //data: { material_id: $(this).attr('id') },
      success: function(data) {
        var h2 = "<label><%= t 'mpara.color' %>: </label>"
        $(h2).appendTo(".color_typos");
        var xrwma = "<label class='xr_typos'>"+color_profil_katw+"</label><br>"
        $(xrwma).appendTo(".color_typos");
        var div = "<div class='div_col_typos'></div>"
        $(div).appendTo(".color_typos");
        $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
            //alert(item.name);
            //return $(".kataskevastes").html(item.name);
            //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
            var div_data = "<div class='xrwma xrwma2'><h5 class='tipos_name'> "+item.name+" </h5><img src='/assets/"+item.image+"' class=color_typos_katw id="+item.name+"><span id="+item.code+"></span></div>";
            $(div_data).appendTo(".color_typos");
          })
        console.log(data) //Δινει στοιχεια για τα data
      },
      error: function(data) { 
      }
    });//end ejax
    //DisplayImg(pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo);
  

    profil_typos_counter = 0;// Πόσα προφίλ διαφορετικα έχω...Μεχρι 3.
    //sunolika_profil_katw = 0;// Πόσα προφίλ έχω όλα μαζι...Μεχρι 3.
    profil_typos_array =[];
    profil_typos_1_id = "0";
    profil_typos_1_json_arithmos = "0";
    profil_typos_2_id = "0";
    profil_typos_2_json_arithmos = "0";
    profil_typos_3_id = "0";
    profil_typos_3_json_arithmos = "0";
    

    function typos_profil(id, arithmo, seira) {
        this.id = id;
        this.arithmo = arithmo;
        this.seira = seira;
    }

    

    $(".extra").on("click", ".typos", function() {
      
      profil_typos_new = $(this).attr('id');
      $( this ).css("background-color","#CA3333");
      $( this ).css("color","white");
      epilogi_t = $( this );
      height_typos_k = Number(epilogi_t.next().attr('id'));
      console.log(height_typos_k);
      

    });

    $(".modal_t").on("click", ".arithmos_typos", function() {
          //ti_epeleksa_a = $("input:checked").val();
          ti_epeleksa_t = $('input[name=optradio_t]:checked', '#myForm_t').val();
          console.log("Ti epeleksa t:"+ti_epeleksa_t);
          $('.modal_t').modal('hide');
          //alert(typeof(ti_epeleksa));

          // Αν πατησω πανω απο 0 πρωφιλ τα προσθετω στον πινακα.
          if (ti_epeleksa_t !== "0"){
            //Βρησκω αν αυτο που πατησα το εχω ειδη επιλεξει. (Αν κανω αλλαγη απο 2 σε 1 πχ)
            //Το διαγραφω και μετα παλι απο την αρχη
            var result = $.grep(profil_typos_array, function(e){ return e.id == profil_typos_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              sunolika_profil_katw = sunolika_profil_katw - parseInt(result[0].arithmo);
              profil_typos_counter = profil_typos_counter - 1;
              height_new = height_new + (height_typos_k * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              var index = functiontofindIndexByKeyValue(profil_typos_array, "id", profil_typos_new);
              if (index > -1) {
                  profil_typos_array.splice(index, 1);
                  console.log("Μετα απο αλλαγη τυπου"+profil_typos_array);
                  if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;
                  profil_typos_1_id = profil_typos_2_id;
                  profil_typos_1_json_arithmos = profil_typos_2_json_arithmos;
                  profil_typos_2_id = profil_typos_3_id;
                  profil_typos_2_json_arithmos = profil_typos_3_json_arithmos;
                  profil_typos_3_id = 0;
                  profil_typos_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;
                  profil_typos_2_id = profil_typos_3_id;
                  profil_typos_2_json_arithmos = profil_typos_3_json_arithmos;
                  profil_typos_3_id = 0;
                  profil_typos_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_typos_3_id = 0;
                  profil_typos_3_json_arithmos = 0;
                }
              }
            } else {
              // multiple items found
            }

            height_typos_k = Number(epilogi_t.next().attr('id'));
            console.log("Height typos"+height_typos_k);
            $.ajax({
                type:'GET',
                url:'/etic/upologismos_upsos_profil',
                dataType: "json",
                data: { profil: epilogi_t.attr('id'), anoigma: $(".open_type").text(), height_new: height_new, input: ti_epeleksa_t },
                success: function(data) {
                 if ( data ) {
      
                  height_new = height_new - (height_typos_k * parseInt(ti_epeleksa_t));
                  $(".diastaseis_extra").text(width_new +"X"+height_new);
                  height_k = (height_typos_k * parseInt(ti_epeleksa_t));

                  //////////////////////////////////////////////////////////////////////////////
                  profil_typos_counter = profil_typos_counter + 1;
                  sunolika_profil_katw = sunolika_profil_katw + parseInt(ti_epeleksa_t);
                  console.log("Counter: "+profil_typos_counter);
                  console.log("Sunolika: "+sunolika_profil_katw);
                  if (sunolika_profil_katw <= 3 && profil_typos_counter <= 3){
                  if(profil_typos_counter == 1){
                      profil_typos_1 = new typos_profil(profil_typos_new, ti_epeleksa_t, profil_typos_counter);
                      //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                      //
                      profil_typos_1_id = profil_typos_new;
                      profil_typos_1_json_arithmos = ti_epeleksa_t;
                      //
                      console.log(profil_typos_1);
                      profil_typos_array.push(profil_typos_1);
                      console.log(profil_typos_array);
                  }else if( profil_typos_counter == 2){
                    profil_typos_2 = new typos_profil(profil_typos_new, ti_epeleksa_t, profil_typos_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_typos_2_id = profil_typos_new;
                    profil_typos_2_json_arithmos = ti_epeleksa_t;
                    //
                    console.log(profil_typos_2);
                    profil_typos_array.push(profil_typos_2);
                    console.log(profil_typos_array);
                  }else if( profil_typos_counter == 3){
                    profil_typos_3 = new typos_profil(profil_typos_new, ti_epeleksa_t, profil_typos_counter);
                    //sunolika_profil_deksia = sunolika_profil_deksia + ti_epeleksa;
                    //
                    profil_typos_3_id = profil_typos_new;
                    profil_typos_3_json_arithmos = ti_epeleksa_t;
                    //
                    console.log(profil_typos_3);
                    profil_typos_array.push(profil_typos_3);
                    console.log(profil_typos_array);
                  }
          
                  }//end if ελεγχου <= 3
                  else{
                      profil_typos_counter = profil_typos_counter - 1;
                      sunolika_profil_katw = sunolika_profil_katw - parseInt(ti_epeleksa_t);
                      console.log("Counter: "+profil_typos_counter);
                      console.log("Sunolika: "+sunolika_typos_katw);

                      height_new = height_new + (height_typos_k * parseInt(ti_epeleksa_t));
                      $(".diastaseis_extra").text(width_new +"X"+height_new);
                      //width_d = (width_profil * parseInt(ti_epeleksa));

                      $( epilogi_t ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
                      $( epilogi_t ).css("color","");
                  }

                  if (sunolika_profil_katw > 0 && profil_typos_counter > 0){
                  console.log("Μπηκα στο ιφ για τυπο");
                  //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
                  $(".color_typos").show();

                  pro_k = "1";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

                }//end megalitera apo 0
                else if (sunolika_profil_katw > 0 && profil_typos_counter == 0){//Εχω προφιλ κατω απο πριν
                  color_profil_katw = "white";
                  $(".color_typos").hide();
                  //pro_k = "0";
                  //var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  //var decimal = parseInt(b, 2);
                  //zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

                }
                else {
                  color_profil_katw = "white";
                  $(".color_typos").hide();
                  pro_k = "0";
                  var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
                  var decimal = parseInt(b, 2);
                  zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

                  times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
                }


                  
                          
                  }else{

                  }
                  },
              error: function(data) { 
              }
            });//end ejax
      
            
          }else{// Διαγράφω το αντικειμενο, -1 counter και -1 γενικο counter


            var result = $.grep(profil_typos_array, function(e){ return e.id == profil_typos_new; });
            if (result.length == 0) {
              // not found
            } else if (result.length == 1) {
              console.log(result[0].arithmo);
              sunolika_profil_katw = sunolika_profil_katw - parseInt(result[0].arithmo);
              height_new = height_new + (height_typos_k * result[0].arithmo);
              $(".diastaseis_extra").text(width_new +"X"+height_new);
              //width_d = (width_profil * parseInt(ti_epeleksa));
            } else {
              // multiple items found
            }
            var index = functiontofindIndexByKeyValue(profil_typos_array, "id", profil_typos_new);
            console.log(index);
            if (index > -1) {
                profil_typos_array.splice(index, 1);

                if ( index == 0 ){
                  //profil_deksia_1_id = 0;
                  //profil_deksia_1_json_arithmos = 0;
                  profil_typos_1_id = profil_typos_2_id;
                  profil_typos_1_json_arithmos = profil_typos_2_json_arithmos;
                  profil_typos_2_id = profil_typos_3_id;
                  profil_typos_2_json_arithmos = profil_typos_3_json_arithmos;
                  profil_typos_3_id = 0;
                  profil_typos_3_json_arithmos = 0;
                }else if( index == 1 ){
                  //profil_deksia_2_id = 0;
                  //profil_deksia_2_json_arithmos = 0;
                  profil_typos_2_id = profil_typos_3_id;
                  profil_typos_2_json_arithmos = profil_typos_3_json_arithmos;
                  profil_typos_3_id = 0;
                  profil_typos_3_json_arithmos = 0;
                }else if( index == 2 ){
                  profil_typos_3_id = 0;
                  profil_typos_3_json_arithmos = 0;
                }
            }
            if ( index != null ){
              profil_typos_counter = profil_typos_counter - 1;
            }
            //console.log(profil_deksia_array);
            $( epilogi_t ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( epilogi_t ).css("color","");
            console.log("Counter typos: "+profil_typos_counter);
            console.log("Sunolika: "+sunolika_profil_katw);
            console.log("Μετα απο διαγραφή typos"+profil_typos_array);

            if (sunolika_profil_katw > 0 && profil_typos_counter > 0){
            console.log("Μπηκα στο ιφ typos");
            //Αν μπει κανονικα το προφιλ, τοτε το ζογραφιζω
            $(".color_typos").show();

            pro_k = "1";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);


          }//end megalitera apo 0
          else if (sunolika_profil_katw > 0 && profil_typos_counter == 0){//Εχω προφιλ κατω απο πριν
            color_profil_katw = "white";
            $(".color_typos").hide();
            //pro_k = "0";
            //var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            //var decimal = parseInt(b, 2);
            //zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

          }
          else{
            color_profil_katw = "white";
            $(".color_typos").hide();
            pro_k = "0";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }//end ζωγραφικη
          }//end else apo 0 ti dialeksa,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos


  
      });

   $(".color_typos").on("click", ".color_typos_katw", function() {
      color_profil_katw = $(this).attr('id');
      $(".xr_profil_katw").text(color_profil_katw);
      $(".xr_typos").text(color_profil_katw);

      color_ty = $(this).next().attr('id');
      color_k = color_ty;
      pro_k = "1";
      var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
      var decimal = parseInt(b, 2);
      zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

    });

    ///// LASTIXO ///////
    lastixo = 0; //Den exw patisei lastixo
    epilogi = true;
    
    $(".extra").on("click", ".lastixo", function() {

  
    if (epilogi){
      //alert("!11!!!1!!");
      lastixo = 1;
      $( this ).css("background-color","#CA3333");
      $( this ).css("color","white");
      epilogi = false;
    }else {
      lastixo = 0;
      //Αλλαγη χρωματος
      $( ".lastixo" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
      $( ".lastixo" ).css("color","");
      epilogi = true;
      }

  }); 

    ///////////////// ΟΔΟΙΓΟΙ NA BAΛΩ TIMI/////////////////////

    $(".extra").on("click", ".odoigoi", function() {

      epilogi_ksana_odoigou = true;

      if (typeof(odoigos) !== "undefined"){
        if (odoigos == $(this).attr('id')){
            //alert("!11!!!1!!");
            odoigos = 0;
            color_odoigos = 0;
            $( ".odoigoi" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( ".odoigoi" ).css("color","");
            $( ".color_odoigou" ).empty();
            epilogi_ksana_odoigou = false;
            
            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }
        }

        if (epilogi_ksana_odoigou) {
                color_odoigou = '<%= @color.name %>'//To color που εχω επιλεξει για παραθυρο
                //Αδιαζω ολα τα κάτω
                //$( ".epikathimena_rola" ).empty(); //Αδιαζω το div για να μπει το νεο κλικ
                //$( ".eksoterika_rola" ).empty();
                //$( ".color_epikathimenou" ).empty();
                //$( ".color_eksoterikou" ).empty();
                $( ".color_odoigou" ).empty();
                //$( ".button" ).empty();
                //Αλλαγη χρωματος
                $( ".odoigoi" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
                $( ".odoigoi" ).css("color","");
                //
                $( this ).css("background-color","#CA3333");
                $( this ).css("color","white");

                odoigos = $(this).attr('id'); //Global variable για να την περασω στην αλλη σελιδα
                $.ajax({
                  type:'GET',
                  url:'/etic/color_odoigou',
                  dataType: "json",
                  //data: { material_id: $(this).attr('id') },
                  success: function(data) {
                    var h2 = "<label><%= t 'extra.odoigoi_color' %>: </label>"
                    $(h2).appendTo(".color_odoigou");
                    var xrwma = "<label class='xr_od'>"+color_odoigou+"</label><br>"
                    $(xrwma).appendTo(".color_odoigou");
                    var div = "<div class='div_col_od'></div>"
                    $(div).appendTo(".color_odoigou");
                    $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
                        //alert(item.name);
                        //return $(".kataskevastes").html(item.name);
                        //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
                        var div_data = "<div class='xrwma xrwma2'><h5 class='tipos_name'> "+item.name+" </h5><img src='/assets/"+item.image+"' class='color_odoig color' id="+item.name+"><span id="+item.code+"></span></div>";
                        $(div_data).appendTo(".div_col_od");
                      })
                    console.log(data) //Δινει στοιχεια για τα data
                  },
                  error: function(data) { 
                  }
                });//end ejax

         times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
  }
  });

    // Απλα επιλεγω χρωμα και το αποθυκεύω σε global
    $(".color_odoigou").on("click", ".color_odoig", function() {
      color_odoigou = $(this).attr('id');
      $(".xr_od").text(color_odoigou);
    
    });


    /////////////////   TZAMIA ////////////////////////////////////
    $(".extra").on("click", ".cat_tzamia", function() { 

      epilogi_ksana_3 = true; //Οταν δεν εχω επιλεξει επικαθιμενα μπαινω στο ΚΑΤΩ if

      //Οταν παταω ξανα την ιδια κατηγορια τζαμιου 
      //1. tzamia = 0;
      if (typeof(cat_tzamia) !== "undefined"){
        if (cat_tzamia == $(this).attr('id')){
            //alert("!11!!!1!!");
            cat_tzamia = 0;
            tzamia = 0;
            $( ".cat_tzamia" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( ".cat_tzamia" ).css("color","");
            $( ".tzamia" ).empty();
            epilogi_ksana_3 = false;
            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }
        }
        //Παλι το height_epik = 0 γιατι τωρα θα επιλεξω νεο επικαθημενο 
      if ( epilogi_ksana_3 )  {  /////Αν δεν ειναι ξανα επιλεγμενο
        cat_tzamia = 0;
        tzamia = 0;
        times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
              //Αλλαγη χρωματος
              $( ".cat_tzamia" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
              $( ".cat_tzamia" ).css("color","");
              $( ".tzamia" ).empty();
              //
              $( this ).css("background-color","#CA3333");
              $( this ).css("color","white");

              cat_tzamia = $(this).attr('id'); //Global variable για να την περασω στην αλλη σελιδα
              $.ajax({
                type:'GET',
                url:'/etic/tzamia',
                dataType: "json",
                data: { id: $(this).attr('id') },
                success: function(data) {
                  var header2 = "<h4><%= t 'extra.glass' %></h4>" 
                  $(header2).appendTo(".tzamia");
                        $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
                            //alert(item.name);
                            //return $(".kataskevastes").html(item.name);
                            //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
                            var div_data = "<label class=tzamia_polla id="+item.id+">"+item.name+"</label><br>";
                            $(div_data).appendTo(".tzamia");
                          })
                        console.log(data) //Δινει στοιχεια για τα data
                      },
                      error: function(data) { 
                      }
                    });//end ejax
          } //end if epilogi ksana
        });


    ///////////////// ΤΖΑΜΙΑ ΠΟΛΛΑ ////////////////////////
    $(".tzamia").on("click", ".tzamia_polla", function() {

      //Αλλαγη χρωματος
      $( ".tzamia_polla" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
      $( ".tzamia_polla" ).css("color","");
      //
      $( this ).css("background-color","#CA3333");
      $( this ).css("color","white");
      //

      tzamia = $(this).attr('id'); //Global variable για να την περασω στην αλλη σελιδα
      times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

    });


    /////////////////   ΕΠΙΚΑΘΗΜΕΝΑ ///////////////////////////////

    // ΚΛΙΚ σε επικαθημενο κρηβω τα παντα απο ρολλα (2). Αλλαζω χρωματα σε label και εμφανιζω τις υποκατηγοριες για τα επικαθημενα

    $(".extra").on("click", ".epikathimena", function() { 

      epilogi_ksana = true; //Οταν δεν εχω επιλεξει επικαθιμενα μπαινω στο ΚΑΤΩ if

      //Οταν παταω ξανα την ιδια κατηγορια επικαθημενου 
      //1. height_epik = 0;
      //2. Η νεα διασταση του κουφωματος ειναι η αρχικη που εδωσα - τα προφιλ αν υπαρχουν
      if (typeof(epikathimeno_cat) !== "undefined"){
        if (epikathimeno_cat == $(this).attr('id')){
            //alert("!11!!!1!!");
            epikathimeno_cat = 0;
            epikathimeno_rolo = 0;
            color_epikathimenou = 0;
            $( ".epikathimena" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( ".epikathimena" ).css("color","");
            $( ".eksoterika" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( ".eksoterika" ).css("color","");
            $( ".epikathimena_rola" ).empty(); //Αδιαζω το div για να μπει το νεο κλικ
            $( ".eksoterika_rola" ).empty();
            $( ".color_epikathimenou" ).empty();
            $( ".color_eksoterikou" ).empty();
            $(".ekso_none").css("display","block");
            height_epik = 0;
            height_new = Number(height) - height_p - height_k;
            $(".diastaseis_extra").text(width_new +"X"+height_new);
            epilogi_ksana = false;
            geniko_rolo = "0"; //Κανω 0 το στοιχειο που
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,0,0,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);
            //Για να διαγραφει απο πινακακι
            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }
        }
        //Παλι το height_epik = 0 γιατι τωρα θα επιλεξω νεο επικαθημενο 
      if ( epilogi_ksana )  {  /////Αν δεν ειναι ξανα επιλεγμενο
        $(".ekso_none").css("display","none");
        eksoteriko_rolo = 0;
        color_eksoterikou = 0;
        epikathimeno_rolo = 0;
        color_epikathimenou = 0;
        height_epik = 0;
        height_new = Number(height) - height_p - height_k;
        $(".diastaseis_extra").text(width_new +"X"+height_new);
              //Αδιαζω ολα τα κάτω
              $( ".epikathimena_rola" ).empty(); //Αδιαζω το div για να μπει το νεο κλικ
              $( ".eksoterika_rola" ).empty();
              $( ".color_epikathimenou" ).empty();
              $( ".color_eksoterikou" ).empty();
              //$( ".button" ).empty();
              //Αλλαγη χρωματος
              $( ".epikathimena" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
              $( ".epikathimena" ).css("color","");
              $( ".eksoterika" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
              $( ".eksoterika" ).css("color","");
              //
              $( this ).css("background-color","#CA3333");
              $( this ).css("color","white");

              epikathimeno_cat = $(this).attr('id'); //Global variable για να την περασω στην αλλη σελιδα
              $.ajax({
                type:'GET',
                url:'/etic/epikathimena',
                dataType: "json",
                data: { epikathimeno_cat: $(this).attr('id') },
                success: function(data) {
                  var header2 = "<h4><%= t 'extra.rola' %></h4>" 
                  $(header2).appendTo(".epikathimena_rola");
                        $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
                            //alert(item.name);
                            //return $(".kataskevastes").html(item.name);
                            //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
                            var div_data = "<label class=epikathimena_rola_polla id="+item.id+">"+item.name+"</label><span id="+item.height+"><span><br>";
                            $(div_data).appendTo(".epikathimena_rola");
                          })
                        console.log(data) //Δινει στοιχεια για τα data
                      },
                      error: function(data) { 
                      }
                    });//end ejax
          } //end if epilogi ksana
        });

    /////////////////   ΕΞΩΤΕΡΙΚΑ ///////////////////////////////
    
    // ΚΛΙΚ σε εξωτερικο κρηβω τα παντα απο ρολλα (2). Αλλαζω χρωματα σε label και εμφανιζω τις υποκατηγοριες για τα εξωτερικα

    $(".extra").on("click", ".eksoterika", function() {

      epilogi_ksana2 = true;

      if (typeof(eksoteriko_cat) !== "undefined"){
        if (eksoteriko_cat == $(this).attr('id')){
            //alert("!11!!!1!!");
            eksoteriko_cat = 0;
            eksoteriko_rolo = 0;
            color_eksoterikou = 0;
            $( ".epikathimena" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( ".epikathimena" ).css("color","");
            $( ".eksoterika" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( ".eksoterika" ).css("color","");
            $( ".epikathimena_rola" ).empty(); //Αδιαζω το div για να μπει το νεο κλικ
            $( ".eksoterika_rola" ).empty();
            $( ".color_epikathimenou" ).empty();
            $( ".color_eksoterikou" ).empty();
            $( ".epik_none" ).css("display","block");
            epilogi_ksana2 = false;
            geniko_rolo = "0"; //Κανω 0 το στοιχειο που
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,0,0,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);
            //pinakaki
            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }
        }

        if (epilogi_ksana2) {
         $(".epik_none").css("display","none");
         eksoteriko_rolo = 0;
         color_eksoterikou = 0;
         epikathimeno_rolo = 0;
         color_epikathimenou = 0;
              //Αδιαζω ολα τα κάτω
              $( ".epikathimena_rola" ).empty(); //Αδιαζω το div για να μπει το νεο κλικ
              $( ".eksoterika_rola" ).empty();
              $( ".color_epikathimenou" ).empty();
              $( ".color_eksoterikou" ).empty();
              //$( ".button" ).empty();
              //Αλλαγη χρωματος
              $( ".epikathimena" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
              $( ".epikathimena" ).css("color","");
              $( ".eksoterika" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
              $( ".eksoterika" ).css("color","");
              //
              $( this ).css("background-color","#CA3333");
              $( this ).css("color","white");

              eksoteriko_cat = $(this).attr('id'); //Global variable για να την περασω στην αλλη σελιδα
              $.ajax({
                type:'GET',
                url:'/etic/eksoterika',
                dataType: "json",
                data: { eksoteriko_cat: $(this).attr('id') },
                success: function(data) {
                  var header2 = "<h4><%= t 'extra.rola' %></h4>" 
                  $(header2).appendTo(".eksoterika_rola");
                        $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
                            //alert(item.name);
                            //return $(".kataskevastes").html(item.name);
                            //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
                            var div_data = "<label class=eksoterika_rola_polla id="+item.id+">"+item.name+"</label><br>";
                            $(div_data).appendTo(".eksoterika_rola");
                          })
                        console.log(data) //Δινει στοιχεια για τα data
                      },
                      error: function(data) { 
                      }
                    });//end ejax
            }
          });

    //////////////////  ΥΠΟΚΑΤΗΓΟΡΙΕΣ /////////////////////

    // Κλικ σε επικαθυμενο.
    // Αρχικοποιω χρωμα επικαθημενου, κρηβω χρωματα για να μην ξαναεμφανιζονται, αλλαζω χρωμα σε label επιλεγμενο, και εμφανιζω χρωματα για το συγκεκριμενο κουφωμα + button για συνεχεια.

    $(".epikathimena_rola").on("click", ".epikathimena_rola_polla", function() {

      epilogi_ksana_rola_polla = true;

      if (typeof(epikathimeno_rolo) !== "undefined"){
        if (epikathimeno_rolo == $(this).attr('id')){
            //alert("!11!!!1!!");
            epikathimeno_rolo = 0;
            $( ".epikathimena_rola_polla" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( ".epikathimena_rola_polla" ).css("color","");
            $( ".color_epikathimenou" ).empty();
            epilogi_ksana_rola_polla = false;
            height_epik = 0;
            height_new = Number(height) - height_p - height_k;
            $(".diastaseis_extra").text(width_new +"X"+height_new);
            geniko_rolo = "0"; //Κανω 0 το στοιχειο που
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,0,0,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);
            //Για να διαγραφει απο πινακακι
            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }
        }

        if (epilogi_ksana_rola_polla) {
          color_epikathimenou = '<%= @color.name %>';//To color που εχω επιλεξει για παραθυρο
      height_epik = Number($(this).next().attr('id'));


      //$( ".button" ).empty();
      $( ".color_epikathimenou" ).empty();
      $( ".color_eksoterikou" ).empty();

      //Αλλαγη χρωματος
      $( ".epikathimena_rola_polla" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
      $( ".epikathimena_rola_polla" ).css("color","");
      //
      $( this ).css("background-color","#CA3333");
      $( this ).css("color","white");

      epikathimeno_rolo = $(this).attr('id'); //Global variable για να την περασω στην αλλη σελιδα
      $.ajax({
        type:'GET',
        url:'/etic/upologismos',
        dataType: "json",
        data: { epikathimeno_rolo: $(this).attr('id'), anoigma: $(".open_type").text(), height_new: height_new },
        success: function(data) {
          var header2 = "<h4><%= t 'extra.color_epik' %></h4>" 
          $(header2).appendTo(".color_epikathimenou");
          if ( data ) {

            height_new = height_new - height_epik;
            $(".diastaseis_extra").text(width_new +"X"+height_new);
            //alert("height_epik"+height_epik);
                      //alert("SWSTO ROLO");
                      //var button = "<button type='button' class='btn btn-default order'>Υποβολή παραγγελίας</button>";
                      //$(button).appendTo(".button");
                      //AJAX για να παρω τα χρωματα
                      $.ajax({
                        type:'GET',
                        url:'/etic/color_epikathimenou',
                        dataType: "json",
                        //data: { material_id: $(this).attr('id') },
                        success: function(data) {
                          var h2 = "<p><%= t 'extra.color_epik_katw' %>:</p>"
                          $(h2).appendTo(".color_epikathimenou");
                          var xrwma = "<p class='xr_ep'>"+color_epikathimenou+"</p><br>"
                          $(xrwma).appendTo(".color_epikathimenou");
                          var div = "<div class='div_col_ep'></div>"
                          $(div).appendTo(".color_epikathimenou");
                          $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
                              //alert(item.name);
                              //return $(".kataskevastes").html(item.name);
                              //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
                              var div_data = "<div class='xrwma xrwma2'><h5 class='tipos_name'> "+item.name+" </h5><img src='/assets/"+item.image+"' class=color_epik id="+item.name+"><span id="+item.code+"></span></div>";
                              $(div_data).appendTo(".div_col_ep");
                            })
                          console.log(data) //Δινει στοιχεια για τα data
                        },
                        error: function(data) { 
                        }
                      });//end ejax

          //Για πινακι και νεες τιμες
          times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

          //Και ασπρο ζωγραφικη
          geniko_rolo = "1";
          var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
          var decimal = parseInt(b, 2);
          zwgrafia(decimal,1,0,"white",color_pers,color_p,color_k,color_d,color_a,leaf);

  }
  else{
   alert("Επιλέξτε πιο μικρό ρολό ή αλλάξτε τις διαστάσεις του κουφώματος. Δεν υπάρχει τιμή για τοσο μικρό κούφωμα.");
   $( ".color_epikathimenou" ).empty();
   $( ".color_eksoterikou" ).empty();
                       //Αλλαγη χρωματος
                       $( ".epikathimena_rola_polla" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
                       $( ".epikathimena_rola_polla" ).css("color","");
                       epikathimeno_rolo = 0;
                       color_epikathimenou = 0;
                     }

                console.log(data) //Δινει στοιχεια για τα data
              },
              error: function(data) { 
              }
              });//end ejax
        }

      

  });

    ///////////// EPILOGI XRWMATOS EPIKATHIMENOU ROLOU //////////////
    // Απλα επιλεγω χρωμα και το αποθυκεύω σε global
    $(".color_epikathimenou").on("click", ".color_epik", function() {
      color_epikathimenou = $(this).attr('id');
      $(".xr_ep").text(color_epikathimenou);

      color = $(this).next().attr('id');
      color_rolou = color;
      geniko_rolo = "1";
      var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
      var decimal = parseInt(b, 2);
      zwgrafia(decimal,1,0,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

    });


    $(".eksoterika_rola").on("click", ".eksoterika_rola_polla", function() {

      color_eksoterikou = '<%= @color.name %>';//To color που εχω επιλεξει για παραθυρο
      epikathimeno_rolo = 0;

      //$( ".button" ).empty();
      $( ".color_epikathimenou" ).empty();
      $( ".color_eksoterikou" ).empty();

      //Αλλαγη χρωματος
      $( ".eksoterika_rola_polla" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
      $( ".eksoterika_rola_polla" ).css("color","");
      //
      $( this ).css("background-color","#CA3333");
      $( this ).css("color","white");
      //

      eksoteriko_rolo = $(this).attr('id'); //Global variable για να την περασω στην αλλη σελιδα
      
      //var button = "<button type='button' class='btn btn-default order_ekso'>Υποβολή παραγγελίας</button>";
      //$(button).appendTo(".button");

      var header2 = "<h4><%= t 'extra.color_ekso' %></h4>" 
      $(header2).appendTo(".color_eksoterikou");

      $.ajax({
        type:'GET',
        url:'/etic/color_eksoterikou',
        dataType: "json",
        //data: { material_id: $(this).attr('id') },
        success: function(data) {
          var h2 = "<p><%= t 'extra.color_ekso_katw' %>: </p>"
          $(h2).appendTo(".color_eksoterikou");
          var xrwma = "<p class='xr_ek'>"+color_eksoterikou+"</p><br>"
          $(xrwma).appendTo(".color_eksoterikou");
          var div = "<div class='div_col_ek'></div>"
          $(div).appendTo(".color_eksoterikou");
          $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
              //alert(item.name);
              //return $(".kataskevastes").html(item.name);
              //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
              var div_data = "<div class='xrwma xrwma2'><h5 class='tipos_name'> "+item.name+" </h5><img src='/assets/"+item.image+"' class=color_ekso id="+item.name+"><span id="+item.code+"></span></div>";
              $(div_data).appendTo(".div_col_ek");
            })
          console.log(data) //Δινει στοιχεια για τα data
        },
        error: function(data) { 
        }
      });//end ejax


      times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);

      geniko_rolo = "1";
      var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
      var decimal = parseInt(b, 2);
      zwgrafia(decimal,0,1,"white",color_pers,color_p,color_k,color_d,color_a,leaf);

    });

    // Απλα επιλεγω χρωμα και το αποθυκεύω σε global
    $(".color_eksoterikou").on("click", ".color_ekso", function() {
      color_eksoterikou = $(this).attr('id');
      $(".xr_ek").text(color_eksoterikou);

      color = $(this).next().attr('id');
      color_rolou = color;
      geniko_rolo = "1";
      var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
      var decimal = parseInt(b, 2);
      zwgrafia(decimal,0,1,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);
    });


    ///////////////// ΠΕΡΣΙΔΕΣ NA BAΛΩ TIMI/////////////////////

    $(".extra").on("click", ".perisdes", function() {

      epilogi_ksana_persides = true;

      if (typeof(persida) !== "undefined"){
        if (persida == $(this).attr('id')){
            //alert("!11!!!1!!");
            persida = 0;
            color_persidas = 0;
            $( ".perisdes" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
            $( ".perisdes" ).css("color","");
            $( ".color_persidas" ).empty();
            epilogi_ksana_persides = false;
            geniko_persida = "0";
            var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
            var decimal = parseInt(b, 2);
            zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);

            times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
          }
        }

        if (epilogi_ksana_persides) {
                color_persidas = '<%= @color.name %>'//To color που εχω επιλεξει για παραθυρο
                //Αδιαζω ολα τα κάτω
                //$( ".epikathimena_rola" ).empty(); //Αδιαζω το div για να μπει το νεο κλικ
                //$( ".eksoterika_rola" ).empty();
                //$( ".color_epikathimenou" ).empty();
                //$( ".color_eksoterikou" ).empty();
                $( ".color_persidas" ).empty();
                //$( ".button" ).empty();
                //Αλλαγη χρωματος
                $( ".perisdes" ).css("background-color","");//Ετσι αφαιρω την ιδιοτητα!!!
                $( ".perisdes" ).css("color","");
                //
                $( this ).css("background-color","#CA3333");
                $( this ).css("color","white");

                persida = $(this).attr('id'); //Global variable για να την περασω στην αλλη σελιδα
                $.ajax({
                  type:'GET',
                  url:'/etic/color_persidas',
                  dataType: "json",
                  //data: { material_id: $(this).attr('id') },
                  success: function(data) {
                    var h2 = "<label><%= t 'extra.color_persidas' %>: </label>"
                    $(h2).appendTo(".color_persidas");
                    var xrwma = "<label class='xr_pe'>"+color_persidas+"</label><br>"
                    $(xrwma).appendTo(".color_persidas");
                    var div = "<div class='div_col_pe'></div>"
                    $(div).appendTo(".color_persidas");
                    $.each(data, function(i, item) { //Για κάθε data που παίρνω κανω τα παρακάτο 
                        //alert(item.name);
                        //return $(".kataskevastes").html(item.name);
                        //$( "<p>item.name</p>" ).appendTo( ".kataskevastes" );
                        var div_data = "<div class='xrwma xrwma2'><h5 class='tipos_name'> "+item.name+" </h5><img src='/assets/"+item.image+"' class=color_pers id="+item.name+"><span id="+item.code+"></span></div>";
                        $(div_data).appendTo(".div_col_pe");
                      })
                    console.log(data) //Δινει στοιχεια για τα data
                  },
                  error: function(data) { 
                  }
                });//end ejax

        geniko_persida = "1";
        var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
        var decimal = parseInt(b, 2);
        zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,"white",color_p,color_k,color_d,color_a,leaf);

         times_json("<%= @open_type.name %>", "<%= @width %>", "<%= @height %>", "<%= @line.name %>", "<%= @mesa_eksw %>", "<%= @color.name %>", width_new, height_new, epikathimeno_rolo,eksoteriko_rolo,persida,tzamia,profil_deksia,profil_aristera,profil_panw,profil_katw,$(".input_deksia").val(),$(".input_panw").val(),$(".input_katw").val(),$(".input_aristera").val(),typos,color_typos,odoigos,$(".color_deksia").text(),$(".color_aristera").text(),$(".color_panw").text(),$(".color_katw").text(),$(".color_fullou").text(),0,profil_deksia_1_id,profil_deksia_1_json_arithmos,profil_deksia_2_id,profil_deksia_2_json_arithmos,profil_deksia_3_id,profil_deksia_3_json_arithmos,profil_aristera_1_id,profil_aristera_1_json_arithmos,profil_aristera_2_id,profil_aristera_2_json_arithmos,profil_aristera_3_id,profil_aristera_3_json_arithmos,profil_panw_1_id,profil_panw_1_json_arithmos,profil_panw_2_id,profil_panw_2_json_arithmos,profil_panw_3_id,profil_panw_3_json_arithmos,profil_katw_1_id,profil_katw_1_json_arithmos,profil_katw_2_id,profil_katw_2_json_arithmos,profil_katw_3_id,profil_katw_3_json_arithmos,profil_typos_1_id,profil_typos_1_json_arithmos,profil_typos_2_id,profil_typos_2_json_arithmos,profil_typos_3_id,profil_typos_3_json_arithmos);
  }
  });

    // Απλα επιλεγω χρωμα και το αποθυκεύω σε global
    $(".color_persidas").on("click", ".color_pers", function() {
      color_persidas = $(this).attr('id');
      $(".xr_pe").text(color_persidas);

      color = $(this).next().attr('id'); 
      color_pers = color;
      geniko_persida = "1";
      var b = pro_a+pro_d+pro_k+pro_p+geniko_persida+geniko_rolo;
      var decimal = parseInt(b, 2);
      zwgrafia(decimal,epikathimeno_rolo,eksoteriko_rolo,color_rolou,color_pers,color_p,color_k,color_d,color_a,leaf);
      
      
    });

    

  
    ///////    ΑΝΑΛΟΓΑ ΜΕ ΤΙ ΡΟΛΟ ΕΧΩ ΕΠΙΛΕΞΕΙ, ΕΧΩ ΔΙΑΦΟΡΕΤΙΚΟ BUTTON /////////////
    ///////    ΣΕ ΑΥΤΟ ΘΑ ΠΕΡΝΑΩ ΚΑΙ ΤΑ ΥΠΟΛΙΠΑ EXTRA ΙΣΩΣ ΜΕ IF ΑΝ ΕΧΟΥΝ ΕΠΙΛΕΧΘΕΙ ///////////////
    code = Number("<%= @open_type.code %>");
    xwrisma_y_1 = "<%= @xwrisma_y_1 %>";
    xwrisma_y_2 = "<%= @xwrisma_y_2 %>";
    xwrisma1 = "<%= @xwrisma1 %>";
    xwrisma2 = "<%= @xwrisma2 %>"
    xwrisma3_1 = "<%= @xwrisma3_1 %>";
    xwrisma3_2 = "<%= @xwrisma3_2 %>";
    xwrisma3_3 = "<%= @xwrisma3_3 %>";


    $(".button").on("click", ".order_prin", function() {
        $("#modal_new_width").html("Νέο μίκος: "+width_new+" mm");
        $("#modal_new_height").html("Νέο ύψος: "+height_new+" mm");

        if ("<%= @leaf.name %>" == "1fullo" && (code === 14 || code === 14.1 || code === 15 || code === 16 || code === 16.1 || code === 17 || code === 18 || code === 21)){
                
                height_dua_duo_new = ( height_new / 2 );
        
                $("input[name='panw_xwrisma']").val("380");
                ypsos_katw = height_new - 380;
                $("input[name='katw_xwrisma']").val(ypsos_katw);

        }
        if ( "<%= @leaf.name %>" == "2fullo" && (code === 16 || code === 16.1 || code === 17 || code === 18)){

                height_dua_duo_new = ( height_new / 2 );
          
                $("input[name='katw_xwrisma']").val(Math.floor(height_dua_duo_new));
                $("input[name='panw_xwrisma']").val(Math.ceil(height_dua_duo_new));
              
                width_dua_duo_new = ( width_new / 2 );
              
                $("input[name='deksia_xwrisma']").val(Math.floor(width_dua_duo_new));
                $("input[name='aristera_xwrisma']").val(Math.ceil(width_dua_duo_new));

        }else if ( "<%= @leaf.name %>" == "2fullo" && (code !== 16 || code !== 16.1 || code !== 17 || code !== 18)){
              width_dua_duo_new = ( width_new / 2 );
              
                $("input[name='deksia_xwrisma']").val(Math.floor(width_dua_duo_new));
                $("input[name='aristera_xwrisma']").val(Math.ceil(width_dua_duo_new));
        }else if ( "<%= @leaf.name %>" == "3fullo" ) {
              width_dua_tria_new = ( width_new / 3 );
              
                if ( ( width_new % 3 ) == 1 ){
                  $("input[name='aristera_xwrisma_3']").val(Math.floor(width_dua_tria_new));
                  $("input[name='mesi_xwrisma']").val(Math.floor(width_dua_tria_new));
                  $("input[name='deksia_xwrisma_3']").val(Math.ceil(width_dua_tria_new));
                }
                else{
                  $("input[name='aristera_xwrisma_3']").val(Math.floor(width_dua_tria_new));
                  $("input[name='mesi_xwrisma']").val(Math.ceil(width_dua_tria_new));
                  $("input[name='deksia_xwrisma_3']").val(Math.ceil(width_dua_tria_new));
                }
                
        }
              
    });

    $(".modal").on("click", ".update", function() {

         if ("<%= @leaf.name %>" == "1fullo" && (code === 14 || code === 14.1 || code === 15 || code === 16 || code === 16.1 || code === 17 || code === 18 || code === 21)){

           xwrisma_y_1 = $("input[name='panw_xwrisma']").val();
           xwrisma_y_2 = $("input[name='katw_xwrisma']").val();
           athrisma = Number(xwrisma_y_1) + Number(xwrisma_y_2);

          if ( ( Number(xwrisma_y_1) <= height_new ) && ( Number(xwrisma_y_2) <= height_new ) && ( Number(xwrisma_y_1) >= 0 ) && ( Number(xwrisma_y_2) >= 0 )){
            xwrisma_y_2 = height_new - xwrisma_y_1;
            $("input[name='katw_xwrisma']").val(xwrisma_y_2);
            var athrisma = Number(xwrisma_y_1) + Number(xwrisma_y_2);
          }
            if ( (athrisma == height_new) && !(isNaN(Number(xwrisma_y_1))) && !(isNaN(Number(xwrisma_y_2))) && Number(xwrisma_y_1) >= 380 && Number(xwrisma_y_2) >= 400 ){
              ok = true;
            }
            else {
              alert("Λαθος όρια. Πατηστε αριθμους και οχι γραμματα. Ακόμη το min πλατος σε κάθε φύλλο είναι 300mm");
               ok = false;
            }
          
          if ( ok ){
            $(".order").show();
          }else{
            $(".order").hide();
          }


         }
         if ( "<%= @leaf.name %>" == "2fullo" && (code === 16 || code === 16.1 || code === 17 || code === 18)){

             xwrisma_y_1 = $("input[name='panw_xwrisma']").val();
             xwrisma_y_2 = $("input[name='katw_xwrisma']").val();
             xwrisma1 = $("input[name='aristera_xwrisma']").val();
             xwrisma2 = $("input[name='deksia_xwrisma']").val();
             
             athrisma_y = Number(xwrisma_y_1) + Number(xwrisma_y_2);
             athrisma = Number(xwrisma1) + Number(xwrisma2);
            if ( ( Number(xwrisma_y_1) <= height_new ) && ( Number(xwrisma_y_2) <= height_new ) && ( Number(xwrisma_y_1) >= 0 ) && ( Number(xwrisma_y_2) >= 0 ) && ( Number(xwrisma1) <= width_new ) && ( Number(xwrisma2) <= width_new ) && ( Number(xwrisma1) >= 0 ) && ( Number(xwrisma2) >= 0 )){
              xwrisma_y_2 = height_new - xwrisma_y_1;
              $("input[name='katw_xwrisma']").val(xwrisma_y_2);
              var athrisma_y = Number(xwrisma_y_1) + Number(xwrisma_y_2);
              xwrisma2 = width_new - xwrisma1;
              $("input[name='deksia_xwrisma']").val(xwrisma2);
              var athrisma = Number(xwrisma1) + Number(xwrisma2);
            }
              if ( (athrisma_y == height_new) && !(isNaN(Number(xwrisma_y_1))) && !(isNaN(Number(xwrisma_y_2))) && Number(xwrisma_y_1) >= 380 && Number(xwrisma_y_2) >= 400 && (athrisma == width_new) && !(isNaN(Number(xwrisma1))) && !(isNaN(Number(xwrisma2))) && Number(xwrisma1) >= 300 && Number(xwrisma2) >= 300){
                ok = true;
              }
              else {
                alert("Λαθος όρια. Πατηστε αριθμους και οχι γραμματα. Ακόμη το min πλατος σε κάθε φύλλο είναι 300mm");
                 ok = false;
              }
            
            if ( ok ){
              $(".order").show();
            }else{
              $(".order").hide();
            }

         }else if ( "<%= @leaf.name %>" == "2fullo" && (code !== 16 || code !== 16.1 || code !== 17 || code !== 18)){

           xwrisma1 = $("input[name='aristera_xwrisma']").val();
           xwrisma2 = $("input[name='deksia_xwrisma']").val();
           athrisma = Number(xwrisma1) + Number(xwrisma2);
          if ( ( Number(xwrisma1) <= width_new ) && ( Number(xwrisma2) <= width_new ) && ( Number(xwrisma1) >= 0 ) && ( Number(xwrisma2) >= 0 )){
            xwrisma2 = width_new - xwrisma1;
            $("input[name='deksia_xwrisma']").val(xwrisma2);
            var athrisma = Number(xwrisma1) + Number(xwrisma2);
          }
            if ( (athrisma == width_new) && !(isNaN(Number(xwrisma1))) && !(isNaN(Number(xwrisma2))) && Number(xwrisma1) >= 300 && Number(xwrisma2) >= 300 ){
              ok = true;
            }
            else {
              alert("Λαθος όρια. Πατηστε αριθμους και οχι γραμματα. Ακόμη το min πλατος σε κάθε φύλλο είναι 300mm");
               ok = false;
            }

            if ( ok ){
              $(".order").show();
            }else{
              $(".order").hide();
            }
             
         }else if ( "<%= @leaf.name %>" == "3fullo" ) {

          xwrisma3_1 = $("input[name='aristera_xwrisma_3']").val();
          xwrisma3_2 = $("input[name='mesi_xwrisma']").val();
          xwrisma3_3 = $("input[name='deksia_xwrisma_3']").val();
          athrisma = Number(xwrisma3_1) + Number(xwrisma3_2) + Number(xwrisma3_3);
          
          if ( (athrisma == width_new) && !(isNaN(Number(xwrisma3_1))) && !(isNaN(Number(xwrisma3_2))) && !(isNaN(Number(xwrisma3_3))) && Number(xwrisma3_1) >= 300 && Number(xwrisma3_2) >= 300 && Number(xwrisma3_3) >= 300 ){
            ok = true;
          }
          else {
            alert("Λαθος όρια. Πατηστε αριθμους και οχι γραμματα");
             ok = false;
             $("#xwrisma_platous_1").val('');
             $("#xwrisma_platous_2").val('');
             $("#xwrisma_platous_3").val('');
          }
          
          if ( ok ){
            $(".order").show();
          }else{
            $(".order").hide();
          }

         }//end 3fullo



    });
    
    //Περναω ολες τις τιμες και ας εχει καποιες null
    $(".modal").on("click", ".order", function() {

      c = document.getElementById("canvas");
      var dataURL = c.toDataURL('image/png');
      var file = dataURLtoBlob(dataURL);
      var fd = new FormData();
      // Append our Canvas image file to the form data
      fd.append("image", file);


      // Convert dataURL to Blob object
      function dataURLtoBlob(dataURL) {
        // Decode the dataURL    
        var binary = atob(dataURL.split(',')[1]);
        // Create 8-bit unsigned array
        var array = [];
        for(var i = 0; i < binary.length; i++) {
            array.push(binary.charCodeAt(i));
        }
        // Return our Blob object
        return new Blob([new Uint8Array(array)], {type: 'image/png'});
      }

      $.ajax({
        type:'POST',
        url:'/etic/save_image',
        dataType: "json",
        data: fd,
        processData: false,
        contentType: false,
        success: function(data) {
          window.location.href = str1+str2+str3+str4+str5+str6+str7+str8+str9+str10+str11+str12+str13+str14+str15+str16+str17+str18+str19+str20+str21+str22+str23+str24+str25+str26+str27+str28+str29+str30+str31+str32+str33+str34+str35+str36+str37+str38+str39+str40+str41+str42+str43+str44+str45+str46+str47+str48+str49+str50+str51+str52+str53+str54+str55+str56+str57+str58+str59+str60+str61+str62+str63+str64+str65+str66+str67+str68+str69+str70+str71+str72+str73+str74+str75+str76+str77+str78+str79+str80+str81+str82+str83+str84+str85+str86+str87+str88+str89+str90+str91+str92+str93+str94+str95+str96+str97+str98+str99+str100+str101+str102+str103+str104+str105+str106+str107+str108+str109+str110+str111+str112+str113+str114+str115+str116+str117+str118+str119+str120+str121+str122+str123+str124+str125+str126+str127+str128+str129+str130+str131+str132+str133+str134+str135+str136+str137+str138+str139+str140+str141+str142+str143+str144+str145+str146+str147+str148+str149+str150+str151+str152+str153+str154+str155+str156+str157+str158+str159+str160+str161+stra+strb;
        },
        error: function(data) { 
        }
      });//end ejax

      profil_deksia_1 = 0;
      profil_deksia_1_arithmos = 0;
      profil_deksia_2 = 0;
      profil_deksia_2_arithmos = 0;
      profil_deksia_3 = 0;
      profil_deksia_3_arithmos = 0;
      profil_aristera_1 = 0;
      profil_aristera_1_arithmos = 0;
      profil_aristera_2 = 0;
      profil_aristera_2_arithmos = 0;
      profil_aristera_3 = 0;
      profil_aristera_3_arithmos = 0;
      profil_panw_1 = 0;
      profil_panw_1_arithmos = 0;
      profil_panw_2 = 0;
      profil_panw_2_arithmos = 0;
      profil_panw_3 = 0;
      profil_panw_3_arithmos = 0;
      profil_katw_1 = 0;
      profil_katw_1_arithmos = 0;
      profil_katw_2 = 0;
      profil_katw_2_arithmos = 0;
      profil_katw_3 = 0;
      profil_katw_3_arithmos = 0;
      typos_katw_1 = 0;
      typos_katw_1_arithmos = 0;
      typos_katw_2 = 0;
      typos_katw_2_arithmos = 0;
      typos_katw_3 = 0;
      typos_katw_3_arithmos = 0;

      for(var i = 0; i < profil_deksia_array.length; i++) {
        if( i === 0){
          profil_deksia_1 = profil_deksia_array[i].id;
          profil_deksia_1_arithmos = profil_deksia_array[i].arithmo;
        }else if( i === 1){
          profil_deksia_2 = profil_deksia_array[i].id;
          profil_deksia_2_arithmos = profil_deksia_array[i].arithmo;
        }else if( i === 2){
          profil_deksia_3 = profil_deksia_array[i].id;
          profil_deksia_3_arithmos = profil_deksia_array[i].arithmo;
        }
          
      }

      for(var i = 0; i < profil_aristera_array.length; i++) {
        if( i === 0){
          profil_aristera_1 = profil_aristera_array[i].id;
          profil_aristera_1_arithmos = profil_aristera_array[i].arithmo;
        }else if( i === 1){
          profil_aristera_2 = profil_aristera_array[i].id;
          profil_aristera_2_arithmos = profil_aristera_array[i].arithmo;
        }else if( i === 2){
          profil_aristera_3 = profil_aristera_array[i].id;
          profil_aristera_3_arithmos = profil_aristera_array[i].arithmo;
        }
          
      }

      for(var i = 0; i < profil_panw_array.length; i++) {
        if( i === 0){
          profil_panw_1 = profil_panw_array[i].id;
          profil_panw_1_arithmos = profil_panw_array[i].arithmo;
        }else if( i === 1){
          profil_panw_2 = profil_panw_array[i].id;
          profil_panw_2_arithmos = profil_panw_array[i].arithmo;
        }else if( i === 2){
          profil_panw_3 = profil_panw_array[i].id;
          profil_panw_3_arithmos = profil_panw_array[i].arithmo;
        }
          
      }

      for(var i = 0; i < profil_katw_array.length; i++) {
        if( i === 0){
          profil_katw_1 = profil_katw_array[i].id;
          profil_katw_1_arithmos = profil_katw_array[i].arithmo;
        }else if( i === 1){
          profil_katw_2 = profil_katw_array[i].id;
          profil_katw_2_arithmos = profil_katw_array[i].arithmo;
        }else if( i === 2){
          profil_katw_3 = profil_katw_array[i].id;
          profil_katw_3_arithmos = profil_katw_array[i].arithmo;
        }
          
      }

      for(var i = 0; i < profil_typos_array.length; i++) {
        if( i === 0){
          typos_katw_1 = profil_typos_array[i].id;
          typos_katw_1_arithmos = profil_typos_array[i].arithmo;
        }else if( i === 1){
          typos_katw_2 = profil_typos_array[i].id;
          typos_katw_2_arithmos = profil_typos_array[i].arithmo;
        }else if( i === 2){
          typos_katw_3 = profil_typos_array[i].id;
          typos_katw_3_arithmos = profil_typos_array[i].arithmo;
        }
          
      }

      str1 = "<%= etic_price_path %>"
      str2 = "?open_categorie_name="
      str3 = "<%= @open_categorie.name %>";
      str4 = "&material_name="
      str5 = $(".material").text();
      str6 = "&constructor_name="
      str7 = $(".constructor").text();
      str8 = "&system_name="
      str9 = $(".system").text();
      str10 = "&line_name="
      str11 = $(".line").text();
      str12 = "&leaf_name="
      str13 = "<%= @leaf.name %>";
      str14 = "&open_type_name="
      str15 = $(".open_type").text();
      str16 = "&color_name="
      str17 = $(".color_main").text();
      str18 = "&color_deksia="
      str19 = $(".color_deksia").text();
      str20 = "&color_aristera="
      str21 = $(".color_aristera").text();
      str22 = "&color_panw="
      str23 = $(".color_panw").text();
      str24 = "&color_katw="
      str25 = $(".color_katw").text();
      str26 = "&color_fulou="
      str27 = $(".color_fullou").text();
      str28 = "&posotita="
      str29 = $(".posotita").text();
      str30 = "&width="
      str31 = $(".width").text();
      str32 = "&height="
      str33 = $(".height").text();
      str34 = "&new_width="
      str35 = width_new;
      str36 = "&new_height="
      str37 = height_new;
      str38 = "&epik_rolo="
      str39 = epikathimeno_rolo;
      str40 = "&xrwma_epikathimenou="
      str41 = color_epikathimenou;
      str42 = "&ekso_rolo="
      str43 = eksoteriko_rolo;
      stra  = "&xrwma_eksoterikou="
      strb  = color_eksoterikou; 
      str44 = "&persida="
      str45 = persida;
      str46 = "&color_persidas="
      str47 = color_persidas;
      str48 = "&lastixo="
      str49 = <%= @lastixo %>
      str50 = "&mesa_eksw="
      str51 = <%= @mesa_eksw %>
      str52 = "&profil_deksia="
      str53 = profil_deksia;
      str54 = "&profil_aristera="
      str55 = profil_aristera;
      str56 = "&profil_panw="
      str57 = profil_panw;
      str58 = "&profil_katw="
      str59 = profil_katw;
      str60 = "&color_profil_deksia="
      str61 = color_profil_deksia;
      str62 = "&color_profil_panw="
      str63 = color_profil_panw;
      str64 = "&color_profil_aristera="
      str65 = color_profil_aristera;
      str66 = "&color_profil_katw="
      str67 = color_profil_katw;
      str68 = "&posotita_deksia_profil="
      str69 = $(".input_deksia").val();
      str70 = "&posotita_aristera_profil="
      str71 = $(".input_aristera").val();
      str72 = "&posotita_panw_profil="
      str73 = $(".input_panw").val();
      str74 = "&posotita_katw_profil="
      str75 = $(".input_katw").val();
      str76 = "&tzamia="
      str77 = tzamia;
      str78 = "&typos="
      str79 = typos;
      str80 = "&color_typos="
      str81 = color_typos;
      str82 = "&xwrisma1="
      str83 = xwrisma1;
      str84 = "&xwrisma2="
      str85 = xwrisma2;
      str86 = "&xwrisma3_1="
      str87 = xwrisma3_1;
      str88 = "&xwrisma3_2="
      str89 = xwrisma3_2;
      str90 = "&xwrisma3_3="
      str91 = xwrisma3_3;
      str92 = "&odoigos_rolou="
      str93 = odoigos;
      str94 = "&color_odoigou="
      str95 = color_odoigou;
      str96 = "&lastixo="
      str97 = lastixo;
      str98 = "&xwrisma_y_1="
      str99 = xwrisma_y_1;
      str100 = "&xwrisma_y_2=" 
      str101 = xwrisma_y_2;
      str102 = "&profil_deksia_1="
      str103 = profil_deksia_1;
      str104 = "&profil_deksia_1_arithmos="
      str105 = profil_deksia_1_arithmos;
      str106 = "&profil_deksia_2="
      str107 = profil_deksia_2;
      str108 = "&profil_deksia_2_arithmos="
      str109 = profil_deksia_2_arithmos;
      str110 = "&profil_deksia_3="
      str111 = profil_deksia_3;
      str112 = "&profil_deksia_3_arithmos="
      str113 = profil_deksia_3_arithmos;
      str114 = "&profil_aristera_1="
      str115 = profil_aristera_1;
      str116 = "&profil_aristera_1_arithmos="
      str117 = profil_aristera_1_arithmos;
      str118 = "&profil_aristera_2="
      str119 = profil_aristera_2;
      str120 = "&profil_aristera_2_arithmos="
      str121 = profil_aristera_2_arithmos;
      str122 = "&profil_aristera_3="
      str123 = profil_aristera_3;
      str124 = "&profil_aristera_3_arithmos="
      str125 = profil_aristera_3_arithmos;
      str126 = "&profil_panw_1="
      str127 = profil_panw_1;
      str128 = "&profil_panw_1_arithmos="
      str129 = profil_panw_1_arithmos;
      str130 = "&profil_panw_2="
      str131 = profil_panw_2;
      str132 = "&profil_panw_2_arithmos="
      str133 = profil_panw_2_arithmos;
      str134 = "&profil_panw_3="
      str135 = profil_panw_3;
      str136 = "&profil_panw_3_arithmos="
      str137 = profil_panw_3_arithmos;
      str138 = "&profil_katw_1="
      str139 = profil_katw_1;
      str140 = "&profil_katw_1_arithmos="
      str141 = profil_katw_1_arithmos;
      str142 = "&profil_katw_2="
      str143 = profil_katw_2;
      str144 = "&profil_katw_2_arithmos="
      str145 = profil_katw_2_arithmos;
      str146 = "&profil_katw_3="
      str147 = profil_katw_3;
      str148 = "&profil_katw_3_arithmos="
      str149 = profil_katw_3_arithmos;
      str150 = "&typos_katw_1="
      str151 = typos_katw_1;
      str152 = "&typos_katw_1_arithmos="
      str153 = typos_katw_1_arithmos;
      str154 = "&typos_katw_2="
      str155 = typos_katw_2;
      str156 = "&typos_katw_2_arithmos="
      str157 = typos_katw_2_arithmos;
      str158 = "&typos_katw_3="
      str159 = typos_katw_3;
      str160 = "&typos_katw_3_arithmos="
      str161 = typos_katw_3_arithmos;
      


      //alert(str1+str2+str3);

      //window.location.href = str1+str2+str3+str4+str5+str6+str7+str8+str9+str10+str11+str12+str13+str14+str15+str16+str17+str18+str19+str20+str21+str22+str23+str24+str25+str26+str27+str28+str29+str30+str31+str32+str33+str34+str35+str36+str37+str38+str39+str40+str41+str42+str43+str44+str45+str46+str47+str48+str49+str50+str51+str52+str53+str54+str55+str56+str57+str58+str59+str60+str61+str62+str63+str64+str65+str66+str67+str68+str69+str70+str71+str72+str73+str74+str75+str76+str77+str78+str79+str80+str81+str82+str83+str84+str85+str86+str87+str88+str89+str90+str91+str92+str93+str94+str95+str96+str97+str98+str99+str100+str101+str102+str103+str104+str105+str106+str107+str108+str109+str110+str111+str112+str113+str114+str115+str116+str117+str118+str119+str120+str121+str122+str123+str124+str125+str126+str127+str128+str129+str130+str131+str132+str133+str134+str135+str136+str137+str138+str139+str140+str141+str142+str143+str144+str145+str146+str147+str148+str149+str150+str151+str152+str153+str154+str155+str156+str157+str158+str159+str160+str161+stra+strb;
     /*
     if ( epikathimeno_rolo != 0){

      window.location.href = +epikathimeno_rolo+"&xrwma_rolou="+color_epikathimenou+"&persida="+persida+"&color_persidas="+color_persidas+"&lastixo="+<%= @lastixo %>+"&mesa_eksw="+<%= @mesa_eksw %>+"";

    }
    if ( eksoteriko_rolo != 0){

      window.location.href = "<%= etic_price_path %>?open_categorie_name="+$(".open_categorie").text()+"&material_name="+$(".material").text()+"&constructor_name="+$(".constructor").text()+"&system_name="+$(".system").text()+"&line_name="+$(".line").text()+"&leaf_name="+$(".leaf").text()+"&open_type_name="+$(".open_type").text()+"&color_name="+$(".color").text()+"&color_deksia="+$(".color_deksia").text()+"&color_aristera="+$(".color_aristera").text()+"&color_panw="+$(".color_panw").text()+"&color_katw="+$(".color_katw").text()+"&color_fulou="+$(".color_fullou").text()+"&posotita="+$(".posotita").text()+"&width="+$(".width").text()+"&height="+$(".height").text()+"&ekso_rolo="+eksoteriko_rolo+"&xrwma_rolou="+color_eksoterikou+"&persida="+persida+"&color_persidas="+color_persidas+"&lastixo="+<%= @lastixo %>+"&mesa_eksw="+<%= @mesa_eksw %>+"";

    }
     /////// ΔΕΝ ΕΧΩ ΡΟΛΛΑ /////////////
     if ( epikathimeno_rolo == 0 && eksoteriko_rolo == 0){
      window.location.href = "<%= etic_price_path %>?open_categorie_name="+$(".open_categorie").text()+"&material_name="+$(".material").text()+"&constructor_name="+$(".constructor").text()+"&system_name="+$(".system").text()+"&line_name="+$(".line").text()+"&leaf_name="+$(".leaf").text()+"&open_type_name="+$(".open_type").text()+"&color_name="+$(".color").text()+"&color_deksia="+$(".color_deksia").text()+"&color_aristera="+$(".color_aristera").text()+"&color_panw="+$(".color_panw").text()+"&color_katw="+$(".color_katw").text()+"&color_fulou="+$(".color_fullou").text()+"&posotita="+$(".posotita").text()+"&width="+$(".width").text()+"&height="+$(".height").text()+"&persida="+persida+"&color_persidas="+color_persidas+"&lastixo="+<%= @lastixo %>+"&mesa_eksw="+<%= @mesa_eksw %>+"";
    }
    */

  });

  setTimeout(function(){
      //ksana();
     },3000);

  });

  $(window).load(function() {

    
     //setTimeout(function(){
      //  ksana();
     //},1000);
     

  });



  </script>